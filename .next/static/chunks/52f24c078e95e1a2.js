(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10129,e=>{"use strict";var t=e.i(9213),s=e.i(13850);let l={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],["link","image"],["clean"]]},r=["header","bold","italic","underline","strike","list","blockquote","code-block","link","image"];function a({value:a,onChange:i,placeholder:n}){let d=(0,s.useRef)(null),c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let t=!0;(async()=>{let s=await e.A(52461),o=s&&(s.default??s);if(!t||!d.current)return;if(c.current=new o(d.current,{theme:"snow",modules:l,formats:r,placeholder:n}),a)try{c.current.clipboard.dangerouslyPasteHTML(a)}catch(e){c.current.setText(a)}let m=()=>{let e=d.current?.querySelector(".ql-editor")?.innerHTML??"";i("<p><br></p>"===e?"":e)};return c.current.on("text-change",m),()=>{t=!1,c.current&&(c.current.off("text-change",m),c.current=null)}})()},[]),(0,s.useEffect)(()=>{let e=c.current;if(e&&a!==(d.current?.querySelector(".ql-editor")?.innerHTML??"")){let t=e.getSelection();try{e.clipboard.dangerouslyPasteHTML(a||"")}catch(t){e.setText(a||"")}t&&e.setSelection(t)}},[a]),(0,t.jsx)("div",{children:(0,t.jsx)("div",{ref:d})})}let i=()=>`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,9)}`;function n(){let e,l,[r,n]=(0,s.useState)("details"),[c,o]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,b]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[f,y]=(0,s.useState)(null),[N,v]=(0,s.useState)([]),[w,k]=(0,s.useState)("job"),[S,C]=(0,s.useState)(!1),[D,q]=(0,s.useState)(null),T=(0,s.useRef)(null),P=(0,s.useRef)(null),A=s.default.useRef({}),[O,J]=(0,s.useState)(!0),[E,I]=(0,s.useState)(!1),[L,B]=(0,s.useState)(!1),M=(e,t,s)=>{e.dataTransfer.setData("application/json",JSON.stringify({source:"palette",type:t,label:s})),e.dataTransfer.effectAllowed="copy"},$=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},R=(e,t,s,l)=>{let r=[...e];if("number"==typeof l)return r.splice(l,0,s),r;let a=-1;for(let e=0;e<r.length;e++)r[e].category===t&&(a=e);if(-1===a){let e=r.findIndex(e=>e.category!==t);return -1===e?r.push(s):r.splice(e,0,s),r}return r.splice(a+1,0,s),r},W=e=>{v(t=>[...t,e]),setTimeout(()=>q(e.id),0)},U=(e,t)=>{e.preventDefault();try{let s=e.dataTransfer.getData("application/json");if(!s)return;let l=JSON.parse(s);if("palette"===l.source){let e={id:i(),type:l.type,label:l.label,category:t};v(s=>R(s,t,e))}else"question"===l.source&&v(e=>{let s=e.find(e=>e.id===l.id);if(!s)return e;let r=e.filter(e=>e.id!==l.id),a={...s,category:t};return R(r,t,a)})}catch(e){}},F=(e,t)=>{v(s=>{let l=[...s],r=l.findIndex(t=>t.id===e);if(-1===r)return s;let a="up"===t?r-1:r+1;if(a<0||a>=l.length)return s;let i=l[a];return l[a]=l[r],l[r]=i,l})},Q=(e,t,s)=>v(l=>l.map(l=>{if(l.id!==e)return l;let r=Array.isArray(l.options)?[...l.options]:[];if(t<0||t>=r.length||s<0||s>=r.length)return l;let[a]=r.splice(t,1);return r.splice(s,0,a),{...l,options:r}})),K=e=>!!e&&10===String(e).replace(/\D/g,"").length,H=e=>!!e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e)),z=e=>(0,t.jsxs)("div",{tabIndex:0,onKeyDown:t=>Z(t,e),draggable:!0,onDragStart:t=>{var s;return s=e.id,void(t.dataTransfer.setData("application/json",JSON.stringify({source:"question",id:s})),t.dataTransfer.effectAllowed="move")},onDragOver:e=>e.preventDefault(),onDrop:t=>((e,t)=>{e.preventDefault();try{let s=e.dataTransfer.getData("application/json");if(!s)return;let l=JSON.parse(s);"question"===l.source?v(e=>{let s=[...e],r=s.findIndex(e=>e.id===l.id),a=s.findIndex(e=>e.id===t);if(-1===r||-1===a||r===a)return e;let[i]=s.splice(r,1);return s.splice(a,0,i),s}):"palette"===l.source&&v(e=>{let s=[...e],r=s.findIndex(e=>e.id===t),a={id:i(),type:l.type,label:l.label,category:s[r]?.category??w};return s.splice(r,0,a),s})}catch(e){}})(t,e.id),className:"border rounded p-3 bg-gray-50",children:[(0,t.jsxs)("div",{className:"w-full flex items-center justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsxs)("select",{value:e.category,onChange:t=>{let s,l;return s=e.id,l=t.target.value,v(e=>e.map(e=>e.id===s?{...e,category:l}:e))},className:"rounded border px-2 py-1 text-sm",children:[(0,t.jsx)("option",{value:"agency",children:"Agency-Wide"}),(0,t.jsx)("option",{value:"job",children:"Job-Specific"})]})}),(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center gap-2",children:(0,t.jsxs)("label",{className:"flex items-center text-sm gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!e.required,onChange:t=>v(s=>s.map(s=>s.id===e.id?{...s,required:t.target.checked}:s))}),(0,t.jsx)("span",{children:"Required"})]})})]}),(0,t.jsx)("div",{className:"mt-3 w-full",children:D===e.id?(0,t.jsx)("input",{ref:e=>{P.current=e},autoFocus:!0,value:e.label,onChange:t=>v(s=>s.map(s=>s.id===e.id?{...s,label:t.target.value}:s)),onBlur:()=>q(null),className:"text-sm font-medium w-full rounded border px-2 py-1"}):(0,t.jsx)("div",{className:"text-sm font-medium",onDoubleClick:()=>q(e.id),children:e.label})}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Type: ",e.type]}),["radio","checkbox","dropdown"].includes(e.type)&&(0,t.jsxs)("div",{className:"mt-3",children:[(e.options||[]).map((s,l)=>(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,t.jsx)("input",{value:s,onChange:t=>{let s,r;return s=e.id,r=t.target.value,v(e=>e.map(e=>{if(e.id!==s)return e;let t=Array.isArray(e.options)?[...e.options]:[];return t[l]=r,{...e,options:t}}))},className:"flex-1 rounded border px-2 py-1 text-sm"}),(0,t.jsx)("button",{onClick:()=>Q(e.id,l,Math.max(0,l-1)),className:"px-2 py-1 text-xs bg-gray-100 rounded",children:"↑"}),(0,t.jsx)("button",{onClick:()=>Q(e.id,l,Math.min((e.options||[]).length-1,l+1)),className:"px-2 py-1 text-xs bg-gray-100 rounded",children:"↓"}),(0,t.jsx)("button",{onClick:()=>{let t;return t=e.id,v(e=>e.map(e=>{if(e.id!==t)return e;let s=Array.isArray(e.options)?[...e.options]:[];return s.splice(l,1),{...e,options:s}}))},className:"px-2 py-1 text-xs text-red-600",children:"Delete"})]},l)),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("button",{onClick:()=>((e,t="New option")=>v(s=>s.map(s=>{if(s.id!==e)return s;let l=Array.isArray(s.options)?[...s.options,t]:[t];return{...s,options:l}})))(e.id),className:"px-3 py-1 text-sm bg-white border rounded",children:"Add option"})})]}),(0,t.jsxs)("div",{className:"flex justify-end items-center gap-2 mt-3",children:[(0,t.jsx)("button",{onClick:()=>q(e.id),className:"text-sm text-gray-700",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>{let t,s;return t=e.id,s=e.category,v(e=>{let l=[...e],r=l.findIndex(e=>e.id===t);if(r<=0)return l;let a=-1;for(let e=r-1;e>=0;e--)if(l[e].category===s){a=e;break}if(-1===a)return l;let i=l[a];return l[a]=l[r],l[r]=i,l})},className:"text-sm text-gray-600",children:"Up"}),(0,t.jsx)("button",{onClick:()=>{let t,s;return t=e.id,s=e.category,v(e=>{let l=[...e],r=l.findIndex(e=>e.id===t);if(-1===r)return l;let a=-1;for(let e=r+1;e<l.length;e++)if(l[e].category===s){a=e;break}if(-1===a)return l;let i=l[a];return l[a]=l[r],l[r]=i,l})},className:"text-sm text-gray-600",children:"Down"}),(0,t.jsx)("button",{onClick:()=>{let t;return t=e.id,v(e=>e.filter(e=>e.id!==t))},className:"text-sm text-red-600",children:"Delete"})]})]},e.id);s.default.useEffect(()=>{if(D&&P.current)try{P.current.focus(),P.current.select()}catch(e){}},[D]);let V=(e,s)=>{let l=e.required?(0,t.jsx)("span",{className:"text-red-600 ml-2",children:"*"}):null;switch(e.type){case"text":default:return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsx)("input",{className:"mt-2 w-full rounded border p-2",placeholder:"Answer"})]},e.id);case"textarea":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsx)("textarea",{className:"mt-2 w-full rounded border p-2",rows:4,placeholder:"Answer"})]},e.id);case"radio":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsx)("div",{className:"mt-2 space-y-1",children:(e.options||[]).map((s,l)=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"radio",name:`q_${e.id}`}),s]},l))})]},e.id);case"checkbox":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsx)("div",{className:"mt-2 space-y-1",children:(e.options||[]).map((e,s)=>(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox"}),e]},s))})]},e.id);case"dropdown":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsxs)("select",{className:"mt-2 w-full rounded border p-2",children:[(0,t.jsx)("option",{children:"Please select one"}),(e.options||[]).map((e,s)=>(0,t.jsx)("option",{children:e},s))]})]},e.id);case"date":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("input",{type:"date",value:e.value?String(e.value).slice(0,10):"",onChange:t=>v(s=>s.map(s=>s.id===e.id?{...s,value:t.target.value?new Date(t.target.value).toISOString():null}:s)),onFocus:e=>{let t=e.target;try{t.showPicker?.()}catch{}},className:"mt-2 w-full rounded border p-2"})})]},e.id);case"phone":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{ref:t=>{A.current[e.id]=t},type:"tel",className:`mt-2 w-full rounded border p-2 ${e.value&&!K(e.value)?"border-red-500":""}`,placeholder:"Phone number",value:e.value||"",onChange:t=>{let s,l=0===(s=String(t.target.value||"").replace(/\D/g,"").slice(0,10)).length?"":s.length<=3?`(${s}`:s.length<=6?`(${s.slice(0,3)}) ${s.slice(3)}`:`(${s.slice(0,3)}) ${s.slice(3,6)}-${s.slice(6)}`;v(t=>t.map(t=>t.id===e.id?{...t,value:l}:t)),setTimeout(()=>{let t=A.current[e.id];if(t){let e=(l||"").length;try{t.setSelectionRange(e,e)}catch(e){}}},0)}}),e.value&&!K(e.value)&&(0,t.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Enter a 10-digit phone number"})]})]},e.id);case"email":return(0,t.jsxs)("div",{className:"py-3",children:[(0,t.jsxs)("div",{className:"text-sm font-medium",children:[String(s).padStart(2,"0"),". ",e.label,l]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{ref:t=>{A.current[e.id]=t},type:"email",className:`mt-2 w-full rounded border p-2 ${e.value&&!H(e.value)?"border-red-500":""}`,placeholder:"Email address",value:e.value||"",onChange:t=>{let s,l,r=(-1!==(l=(s=(s=String(t.target.value||"").trim().toLowerCase()).replace(/\s+/g,"")).indexOf("@"))&&(s=s.slice(0,l+1)+s.slice(l+1).replace(/@/g,"")),s.slice(0,254));v(t=>t.map(t=>t.id===e.id?{...t,value:r}:t)),setTimeout(()=>{let t=A.current[e.id];if(t){let e=(r||"").length;try{t.setSelectionRange(e,e)}catch(e){}}},0)}}),e.value&&!H(e.value)&&(0,t.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Enter a valid email address"})]})]},e.id)}},Z=(e,t)=>{if("Delete"===e.key)return void v(e=>e.filter(e=>e.id!==t.id));if("Enter"===e.key){let e=prompt("Edit question label",t.label);null!=e&&v(s=>s.map(s=>s.id===t.id?{...s,label:e}:s));return}(e.ctrlKey||e.metaKey)&&"ArrowUp"===e.key?F(t.id,"up"):(e.ctrlKey||e.metaKey)&&"ArrowDown"===e.key&&F(t.id,"down")},G=async()=>{try{let e=await fetch("/api/post-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"New Job",description:c,requirements:m,minimumQualifications:u,benefits:p,scoringCriteria:g,includeQuestions:O})});if(await e.json(),!e.ok)return void alert("Failed to create job");O&&N.length>0&&await d(N),alert("Job published")}catch(e){console.error("Publish error",e),alert("Publish failed")}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white rounded-xl shadow border border-gray-200 mt-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-1",children:"Create New Job Posting"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Fill in the details for your new job posting"}),(0,t.jsxs)("div",{className:"flex items-center border-b mb-5",children:[(0,t.jsx)("button",{type:"button",onClick:()=>n("details"),className:`px-4 py-2 -mb-px font-semibold ${"details"===r?"border-b-2 border-blue-600 text-blue-700":"text-gray-400"}`,children:"JOB DETAILS"}),(0,t.jsx)("button",{type:"button",onClick:()=>n("questions"),className:`px-4 py-2 -mb-px font-semibold ${"questions"===r?"border-b-2 border-blue-600 text-blue-700":"text-gray-400"}`,children:"QUESTIONS"})]}),"details"===r?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-3",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Department"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select department"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"If not in the list, please specify:"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., New Department..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job / Exam Number *"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., JOB2026-001"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Title *"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., Web Developer..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Opening Date *"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{type:"date",onFocus:e=>{let t=e.target;try{t.showPicker?.()}catch{}},className:"mt-1 block w-full rounded border border-red-300 px-3 py-2"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Closing Date"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{type:"date",onFocus:e=>{let t=e.target;try{t.showPicker?.()}catch{}},className:"mt-1 block w-full rounded border border-gray-300 px-3 py-2"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Review Date"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("input",{type:"date",onFocus:e=>{let t=e.target;try{t.showPicker?.()}catch{}},className:"mt-1 block w-full rounded border border-gray-300 px-3 py-2"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center mt-3",children:[(0,t.jsx)("input",{id:"continuous",type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"continuous",className:"ml-2 text-sm",children:"Continuous"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Location *"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"City"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"State"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"State"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"ZIP"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"5-digit ZIP Code"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Type *"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select type"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Work Site"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select work site"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Level"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select level"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Classification *"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select Classification"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"If not in the list, please specify:"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., New job classification..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Function *"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select function"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"If not in the list, please specify:"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., New job function..."})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Job Category *"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select Category"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-500",children:"If not in the list, please specify:"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., New job category..."})]})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-3",children:"Compensation"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Compensation Type"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Annual Salary"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Minimum Pay"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., 50,000.00"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Maximum Pay"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., 140,000.00"})]})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-3",children:"Job Details"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Job Description *"}),(0,t.jsx)(a,{value:c,onChange:o,placeholder:"Please describe the role, responsibilities, and what a typical day looks like..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Requirements *"}),(0,t.jsx)(a,{value:m,onChange:x,placeholder:"Please list the required qualifications, skills, and experience..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Benefits *"}),(0,t.jsx)(a,{value:p,onChange:b,placeholder:"Please describe the benefits and perks offered..."})]})]})]}),(0,t.jsx)("section",{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Minimum Qualifications (MQ)"}),(0,t.jsx)("textarea",{rows:3,value:u,onChange:e=>h(e.target.value),className:"w-full rounded border border-gray-300 p-3 text-sm",placeholder:"e.g., Bachelor's degree in relevant field OR 5 years equivalent experience; Valid driver's license required; Must pass background check..."})]})}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-3",children:"Civil Service & Compliance"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Bargaining Unit"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select professional unit"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Pay Grade"}),(0,t.jsx)("input",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2",placeholder:"e.g., Grade 12"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Education"}),(0,t.jsx)("select",{className:"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white",children:(0,t.jsx)("option",{children:"Select education"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mt-4",children:[(0,t.jsxs)("label",{className:"flex items-center text-sm",children:[(0,t.jsx)("input",{type:"checkbox",className:"mr-2 h-4 w-4"})," Civil Service Exam"]}),(0,t.jsxs)("label",{className:"flex items-center text-sm",children:[(0,t.jsx)("input",{type:"checkbox",className:"mr-2 h-4 w-4"})," Veteran Preference"]}),(0,t.jsxs)("label",{className:"flex items-center text-sm",children:[(0,t.jsx)("input",{type:"checkbox",className:"mr-2 h-4 w-4"})," FLSA"]}),(0,t.jsxs)("label",{className:"flex items-center text-sm",children:[(0,t.jsx)("input",{type:"checkbox",className:"mr-2 h-4 w-4"})," Driver's license"]}),(0,t.jsxs)("label",{className:"flex items-center text-sm",children:[(0,t.jsx)("input",{type:"checkbox",className:"mr-2 h-4 w-4"})," Reference"]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Scoring Criteria"}),(0,t.jsx)("textarea",{rows:3,value:g,onChange:e=>j(e.target.value),className:"w-full rounded border border-gray-300 p-3 text-sm",placeholder:"Describe the scoring criteria and weights (e.g., Education 30%, Experience 40%, Skills 30%)..."})]})]}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{onClick:G,className:"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm",children:"Publish Job"})})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("label",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:O,onChange:e=>J(e.target.checked),className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Include screening questions"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"(Optional — only add questions if required for this job)"})]})}),O?null:(0,t.jsxs)("div",{className:"border rounded p-4 bg-gray-50 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Screening questions are disabled for this job."}),(0,t.jsx)("button",{type:"button",onClick:()=>J(!0),className:"px-3 py-2 bg-blue-600 text-white rounded text-sm",children:"Enable Screening Questions"})]}),(0,t.jsxs)("div",{className:"border rounded-md p-4 flex items-center justify-between bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("svg",{width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-400",children:[(0,t.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M14 2v6h6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-700",children:"Upload PDF or Word document with pre-written questions here..."}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Supported: .pdf, .doc, .docx"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{ref:T,type:"file",className:"hidden",accept:".pdf,.doc,.docx,.txt",onChange:async e=>{let t=e.target.files?.[0];if(t){if((f||N.length>0)&&!confirm("Uploading a new file will overwrite any existing questions. Continue?")){e.currentTarget.value="";return}if(y(t.name),t.type.startsWith("text/")||t.name.toLowerCase().endsWith(".txt"))try{let e=(await t.text()).split(/\r?\n/).map(e=>e.trim()).filter(Boolean);if(e.length>0){let t=e.slice(0,50).map(e=>({id:i(),type:"text",label:e,category:w,required:!0}));v(t),setTimeout(()=>{t[0]?.id&&q(t[0].id)},0)}else{let e={id:i(),type:"text",label:t.name,category:w,required:!0};v([e]),setTimeout(()=>q(e.id),0)}}catch(s){let e={id:i(),type:"text",label:`Uploaded: ${t.name} (parsing requires server)`,category:w};v([e]),setTimeout(()=>q(e.id),0)}else try{let e,s=await t.arrayBuffer(),l=new Uint8Array(s),r="";for(let e=0;e<l.length;e+=32768){let t=l.subarray(e,e+32768);r+=String.fromCharCode.apply(null,Array.from(t))}let a=btoa(r);try{let s=await fetch("/api/post-job/upload-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,mime:t.type,data:a})}),l=await s.json();l&&l.ok&&l.versionId&&(e=l.versionId)}catch(e){}let n=await fetch("/api/post-job/parse-doc",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,mime:t.type,data:a,versionId:e})}),d=await n.json(),c=[];if(d&&d.ok&&Array.isArray(d.parsed)&&d.parsed.length>0)c=d.parsed.map(e=>({...e,category:e.category??w}));else{let e=(d&&d.ok&&d.text?String(d.text):d&&d.html?String(d.html).replace(/<[^>]+>/g,"\n"):"").split(/\n{2,}/).map(e=>e.trim()).filter(Boolean).slice(0,200),s=e=>e.replace(/^[\-\u2022\*\s]*/,"").replace(/^[0-9]+[\).]\s*/,"").replace(/^[a-zA-Z][\).]\s*/,"").trim();for(let t of e){let e=t.split(/\r?\n/).map(e=>e.trim()).filter(Boolean);if(0!==e.length){if(e.length>1&&e.slice(1).filter(e=>/^([\-\u2022\*]|[0-9]+[\).]|[a-zA-Z][\).])/.test(e)||/^\s*[-•*]/.test(e)).length>=1){let t=e.slice(1).map(s).filter(Boolean);c.push({id:i(),type:"radio",label:e[0],options:t,category:w,required:!0});continue}c.push({id:i(),type:"text",label:e[0],category:w,required:!0})}}0===c.length&&c.push({id:i(),type:"text",label:`Uploaded: ${t.name} (no parseable content)`,category:w,required:!0})}v(c),c.length>0&&setTimeout(()=>q(c[0].id),0)}catch(s){let e={id:i(),type:"text",label:`Uploaded: ${t.name} (parsing requires server)`,category:w};v([e]),setTimeout(()=>q(e.id),0)}}}}),(0,t.jsxs)("button",{type:"button",onClick:()=>T.current?.click(),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border rounded text-sm hover:bg-gray-100",children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-600",children:[(0,t.jsx)("path",{d:"M12 5v14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M19 12l-7-7-7 7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Upload Questions"]}),f&&(0,t.jsx)("div",{children:L?(0,t.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700 mr-2",children:"Confirm delete?"}),(0,t.jsx)("button",{type:"button",onClick:()=>{y(null),v([]),T.current&&(T.current.value=""),B(!1)},className:"px-3 py-1 bg-red-600 text-white rounded text-sm",children:"Delete"}),(0,t.jsx)("button",{type:"button",onClick:()=>B(!1),className:"px-3 py-1 bg-white border rounded text-sm",children:"Cancel"})]}):(0,t.jsx)("button",{type:"button",onClick:()=>B(!0),className:"inline-flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded text-sm text-red-600 hover:bg-red-100",children:"Delete Upload"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("label",{className:"text-sm text-gray-600",children:"Default category for new questions:"}),(0,t.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"rounded border px-2 py-1 text-sm",children:[(0,t.jsx)("option",{value:"agency",children:"Agency-Wide Questions"}),(0,t.jsx)("option",{value:"job",children:"Job-Specific Supplemental Questions"})]}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsxs)("button",{type:"button",onClick:()=>C(e=>!e),"aria-pressed":S,className:`inline-flex items-center gap-2 px-3 py-1 text-sm rounded focus:outline-none focus:ring-2 ${S?"bg-blue-600 text-white border border-blue-700 hover:bg-blue-700":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-100"}`,children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${S?"text-white":"text-gray-600"}`,children:[(0,t.jsx)("path",{d:"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"1.25"})]}),(0,t.jsx)("span",{children:"Preview as applicant"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-2",children:"Screening Questions"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Build custom screening questions for applicants by clicking form elements."}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Form Elements"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"text","Short answer"),type:"button",onClick:()=>{W({id:i(),type:"text",label:"Short answer",category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Text Input"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Single line text"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"textarea","Long answer"),type:"button",onClick:()=>{W({id:i(),type:"textarea",label:"Long answer",category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Text Area"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Multi-line text"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"checkbox","Choose options"),type:"button",onClick:()=>{W({id:i(),type:"checkbox",label:"Choose options",options:["Option 1","Option 2"],category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Checkbox"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Multiple choice"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"radio","Choose one"),type:"button",onClick:()=>{W({id:i(),type:"radio",label:"Choose one",options:["Option A","Option B"],category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Radio Buttons"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Single choice"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"dropdown","Select"),type:"button",onClick:()=>{W({id:i(),type:"dropdown",label:"Select",options:["One","Two"],category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Dropdown"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Select from list"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"date","Select date"),type:"button",onClick:()=>{W({id:i(),type:"date",label:"Select date",category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Date"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Date picker"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"phone","Phone"),type:"button",onClick:()=>{W({id:i(),type:"phone",label:"Phone",category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Phone"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Phone number"})]}),(0,t.jsxs)("button",{draggable:!0,onDragStart:e=>M(e,"email","Email"),type:"button",onClick:()=>{W({id:i(),type:"email",label:"Email",category:w,required:!0})},className:"text-left p-3 border rounded bg-white hover:shadow-sm",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Email"}),(0,t.jsx)("div",{className:"text-xs text-gray-400",children:"Email address"})]})]})]})}),(0,t.jsx)("div",{className:"md:col-span-2",children:(0,t.jsxs)("div",{className:"min-h-[16rem] border-2 border-dashed rounded-lg p-4 bg-white space-y-4",children:[(0,t.jsxs)("div",{onDragOver:$,onDrop:e=>U(e,"agency"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Agency-Wide Questions"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[N.filter(e=>"agency"===e.category).length," items"]})]}),0===N.filter(e=>"agency"===e.category).length?(0,t.jsx)("div",{className:"rounded p-4 bg-gray-50 text-center text-sm text-gray-400",children:"No agency-wide questions. Click an element to add."}):(0,t.jsx)("div",{className:"space-y-3",children:N.filter(e=>"agency"===e.category).map(z)})]}),(0,t.jsxs)("div",{onDragOver:$,onDrop:e=>U(e,"job"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"Job-Specific Supplemental Questions"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[N.filter(e=>"job"===e.category).length," items"]})]}),0===N.filter(e=>"job"===e.category).length?(0,t.jsx)("div",{className:"rounded p-4 bg-gray-50 text-center text-sm text-gray-400",children:"No job-specific questions. Click an element to add."}):(0,t.jsx)("div",{className:"space-y-3",children:N.filter(e=>"job"===e.category).map(z)})]})]})})]})]}),S&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"font-semibold text-base mb-3",children:"Preview — Applicant View"}),(0,t.jsx)("div",{className:"border rounded p-4 bg-white",children:(e=N.filter(e=>"agency"===e.category),l=N.filter(e=>"job"===e.category),(0,t.jsxs)(t.Fragment,{children:[e.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-center",children:"Agency-Wide Questions"}),(0,t.jsx)("div",{className:"mt-2",children:e.map((e,t)=>V(e,t+1))})]}),l.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-center",children:"Supplemental Questions"}),(0,t.jsx)("div",{className:"mt-2",children:l.map((e,t)=>V(e,t+1))})]}),0===e.length&&0===l.length&&(0,t.jsx)("div",{className:"text-sm text-gray-400 text-center",children:"No screening questions to preview."})]}))})]}),(0,t.jsx)("div",{className:"border-t pt-6",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{onClick:G,className:"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm",children:"Publish Job"})})})]})]})}async function d(e){return(await fetch("/api/jobs/questions/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:null,questions:e})})).json()}e.s(["default",()=>n],10129)}]);