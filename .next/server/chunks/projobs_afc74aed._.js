module.exports=[66565,t=>{"use strict";class e extends Error{name="MeiliSearchError"}class s extends e{name="MeiliSearchApiError";cause;response;constructor(t,e){super(e?.message??`${t.status}: ${t.statusText}`),this.response=t,void 0!==e&&(this.cause=e)}}class i extends e{name="MeiliSearchRequestError";constructor(t,e){super(`Request to ${t} has failed`,{cause:e})}}class a extends e{name="MeiliSearchRequestTimeOutError";cause;constructor(t,e){super(`request timed out after ${t}ms`),this.cause={timeout:t,requestInit:e}}}class r extends e{name="MeiliSearchTaskTimeOutError";cause;constructor(t,e){super(`timeout of ${e}ms has exceeded on task ${t} when waiting for it to be resolved.`),this.cause={taskUid:t,timeout:e}}}let n=Symbol("<timeout>");function h(t,e){let{signal:s}=t,i=new AbortController;if(null!=s){let t=null;if(s.aborted)i.abort(s.reason);else{let e=()=>i.abort(s.reason);s.addEventListener("abort",e,{once:!0}),t=()=>s.removeEventListener("abort",e),i.signal.addEventListener("abort",t,{once:!0})}return()=>{if(s.aborted)return;let a=setTimeout(()=>i.abort(n),e),r=()=>{clearTimeout(a),null!==t&&i.signal.removeEventListener("abort",t)};return s.addEventListener("abort",r,{once:!0}),()=>{s.removeEventListener("abort",r),r()}}}return t.signal=i.signal,()=>{let t=setTimeout(()=>i.abort(n),e);return()=>clearTimeout(t)}}class u{#t;#e;#s;#i;constructor(t){const s=function(t){return t.endsWith("/")||(t+="/"),t}(function(t){return t.startsWith("https://")||t.startsWith("http://")?t:`http://${t}`}(t.host));try{this.#t=new URL(s)}catch(t){throw new e("The provided host is not valid",{cause:t})}this.#e={...t.requestInit,headers:function(t,e){let s="X-Meilisearch-Client",i="Meilisearch JavaScript (v0.55.0)",a="Content-Type",r="Authorization",n=new Headers(e);if(t.apiKey&&!n.has(r)&&n.set(r,`Bearer ${t.apiKey}`),n.has(a)||n.set(a,"application/json"),void 0!==t.clientAgents){let e=t.clientAgents.concat(i);n.set(s,e.join(" ; "))}else n.set(s,i);return n}(t,t.requestInit?.headers)},this.#s=t.httpClient,this.#i=t.timeout}#a(t,e){if(void 0===t&&void 0===e)return this.#e.headers;let s=new Headers(t);for(let[t,i]of(void 0===e||s.has("Content-Type")||s.set("Content-Type",e),this.#e.headers))s.has(t)||s.set(t,i);return s}#r({path:t,method:e,params:s,contentType:i,body:a,extraRequestInit:r}){let n=new URL(t,this.#t);return void 0!==s&&function(t,e){for(let[s,i]of Object.entries(e))null!=i&&t.set(s,Array.isArray(i)?i.join():i instanceof Date?i.toISOString():String(i))}(n.searchParams,s),{url:n,init:{method:e,body:void 0===i||"string"!=typeof a?JSON.stringify(a):a,...r,...this.#e,headers:this.#a(r?.headers,i)}}}async #n(t){let e,r,{url:u,init:o}=this.#r(t),d=void 0!==this.#i?h(o,this.#i):null,p=d?.();try{if(void 0!==this.#s)return await this.#s(u,o);e=await fetch(u,o),r=await e.text()}catch(t){throw new i(u.toString(),Object.is(t,n)?new a(this.#i,o):t)}finally{p?.()}let c=""===r?void 0:JSON.parse(r);if(!e.ok)throw new s(e,c);return c}get(t){return this.#n(t)}post(t){return this.#n({...t,method:"POST"})}put(t){return this.#n({...t,method:"PUT"})}patch(t){return this.#n({...t,method:"PATCH"})}delete(t){return this.#n({...t,method:"DELETE"})}postStream(t){return this.#h({...t,method:"POST"})}async #h(t){let r,{url:u,init:o}=this.#r(t),d=void 0!==this.#i?h(o,this.#i):null,p=d?.();try{if(void 0!==this.#s){let t=await this.#s(u,o);if(!(t instanceof ReadableStream))throw new e("Custom HTTP client must return a ReadableStream for streaming requests");return t}r=await fetch(u,o)}catch(t){throw new i(u.toString(),Object.is(t,n)?new a(this.#i,o):t)}finally{p?.()}if(!r.ok){let t=await r.text();throw new s(r,""===t?void 0:JSON.parse(t))}if(!r.body)throw new e("Response body is null - server did not return a readable stream");return r.body}}let o=Symbol("<task timeout>");function d(t){return function(e){return Object.defineProperty(e,"waitTask",{value:async s=>await t.waitForTask(await e,s)})}}class p{#u;#o;#d;#p;constructor(t,e){this.#u=t,this.#o=e?.timeout??5e3,this.#d=e?.interval??50,this.#p=d(this)}async getTask(t,e){return await this.#u.get({path:`tasks/${t}`,extraRequestInit:e})}async getTasks(t){return await this.#u.get({path:"tasks",params:t})}async waitForTask(t,e){let s="number"==typeof t?t:t.taskUid,i=e?.timeout??this.#o,a=e?.interval??this.#d,n=i>0?new AbortController:null,h=null!==n?setTimeout(()=>void n.abort(o),i):void 0;try{for(;;){let t=await this.getTask(s,{signal:n?.signal});if("enqueued"!==t.status&&"processing"!==t.status)return clearTimeout(h),t;a>0&&await new Promise(t=>setTimeout(t,a))}}catch(t){throw Object.is(t.cause,o)?new r(s,i):t}}async *waitForTasksIter(t,e){for await(let s of t)yield await this.waitForTask(s,e)}async waitForTasks(...t){let e=[];for await(let s of this.waitForTasksIter(...t))e.push(s);return e}cancelTasks(t){return this.#p(this.#u.post({path:"tasks/cancel",params:t}))}deleteTasks(t){return this.#p(this.#u.delete({path:"tasks",params:t}))}}function c(t,e){let s=d(e);return{post:(...e)=>s(t.post(...e)),put:(...e)=>s(t.put(...e)),patch:(...e)=>s(t.patch(...e)),delete:(...e)=>s(t.delete(...e))}}class l{uid;primaryKey;createdAt;updatedAt;httpRequest;tasks;#c;constructor(t,e,s){this.uid=e,this.primaryKey=s,this.httpRequest=new u(t),this.tasks=new p(this.httpRequest,t.defaultWaitOptions),this.#c=c(this.httpRequest,this.tasks)}async search(t,e,s){return await this.httpRequest.post({path:`indexes/${this.uid}/search`,body:{q:t,...e},extraRequestInit:s})}async searchGet(t,s,i){let a={q:t,...s,filter:(t=>{if("string"==typeof t)return t;if(Array.isArray(t))throw new e("The filter query parameter should be in string format when using searchGet")})(s?.filter),sort:s?.sort?.join(","),facets:s?.facets?.join(","),attributesToRetrieve:s?.attributesToRetrieve?.join(","),attributesToCrop:s?.attributesToCrop?.join(","),attributesToHighlight:s?.attributesToHighlight?.join(","),vector:s?.vector?.join(","),attributesToSearchOn:s?.attributesToSearchOn?.join(",")};return await this.httpRequest.get({path:`indexes/${this.uid}/search`,params:a,extraRequestInit:i})}async searchForFacetValues(t,e){return await this.httpRequest.post({path:`indexes/${this.uid}/facet-search`,body:t,extraRequestInit:e})}async searchSimilarDocuments(t){return await this.httpRequest.post({path:`indexes/${this.uid}/similar`,body:t})}async getRawInfo(){let t=await this.httpRequest.get({path:`indexes/${this.uid}`});return this.primaryKey=t.primaryKey,this.updatedAt=new Date(t.updatedAt),this.createdAt=new Date(t.createdAt),t}async fetchInfo(){return await this.getRawInfo(),this}async fetchPrimaryKey(){return this.primaryKey=(await this.getRawInfo()).primaryKey,this.primaryKey}static create(t,e={},s){let i=new u(s);return c(i,new p(i)).post({path:"indexes",body:{...e,uid:t}})}update(t){return this.#c.patch({path:`indexes/${this.uid}`,body:t})}delete(){return this.#c.delete({path:`indexes/${this.uid}`})}async getStats(){return await this.httpRequest.get({path:`indexes/${this.uid}/stats`})}async getDocuments(t){let e=`indexes/${this.uid}/documents`,s=t?{...t}:void 0;return s&&Array.isArray(s.sort)&&0===s.sort.length&&delete s.sort,s?.filter!==void 0?await this.httpRequest.post({path:`${e}/fetch`,body:s}):await this.httpRequest.get({path:e,params:s})}async getDocument(t,e){let s=Array.isArray(e?.fields)?e.fields.join():void 0;return await this.httpRequest.get({path:`indexes/${this.uid}/documents/${t}`,params:{...e,fields:s}})}addDocuments(t,e){return this.#c.post({path:`indexes/${this.uid}/documents`,params:e,body:t})}addDocumentsFromString(t,e,s){return this.#c.post({path:`indexes/${this.uid}/documents`,body:t,params:s,contentType:e})}addDocumentsInBatches(t,e=1e3,s){let i=[];for(let a=0;a<t.length;a+=e)i.push(this.addDocuments(t.slice(a,a+e),s));return i}updateDocuments(t,e){return this.#c.put({path:`indexes/${this.uid}/documents`,params:e,body:t})}updateDocumentsInBatches(t,e=1e3,s){let i=[];for(let a=0;a<t.length;a+=e)i.push(this.updateDocuments(t.slice(a,a+e),s));return i}updateDocumentsFromString(t,e,s){return this.#c.put({path:`indexes/${this.uid}/documents`,body:t,params:s,contentType:e})}deleteDocument(t){return this.#c.delete({path:`indexes/${this.uid}/documents/${t}`})}deleteDocuments(t){let e=!Array.isArray(t)&&"object"==typeof t;return this.#c.post({path:`indexes/${this.uid}/${e?"documents/delete":"documents/delete-batch"}`,body:t})}deleteAllDocuments(){return this.#c.delete({path:`indexes/${this.uid}/documents`})}updateDocumentsByFunction(t){return this.#c.post({path:`indexes/${this.uid}/documents/edit`,body:t})}async getSettings(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings`})}updateSettings(t){return this.#c.patch({path:`indexes/${this.uid}/settings`,body:t})}resetSettings(){return this.#c.delete({path:`indexes/${this.uid}/settings`})}async getPagination(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/pagination`})}updatePagination(t){return this.#c.patch({path:`indexes/${this.uid}/settings/pagination`,body:t})}resetPagination(){return this.#c.delete({path:`indexes/${this.uid}/settings/pagination`})}async getSynonyms(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/synonyms`})}updateSynonyms(t){return this.#c.put({path:`indexes/${this.uid}/settings/synonyms`,body:t})}resetSynonyms(){return this.#c.delete({path:`indexes/${this.uid}/settings/synonyms`})}async getStopWords(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/stop-words`})}updateStopWords(t){return this.#c.put({path:`indexes/${this.uid}/settings/stop-words`,body:t})}resetStopWords(){return this.#c.delete({path:`indexes/${this.uid}/settings/stop-words`})}async getRankingRules(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/ranking-rules`})}updateRankingRules(t){return this.#c.put({path:`indexes/${this.uid}/settings/ranking-rules`,body:t})}resetRankingRules(){return this.#c.delete({path:`indexes/${this.uid}/settings/ranking-rules`})}async getDistinctAttribute(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/distinct-attribute`})}updateDistinctAttribute(t){return this.#c.put({path:`indexes/${this.uid}/settings/distinct-attribute`,body:t})}resetDistinctAttribute(){return this.#c.delete({path:`indexes/${this.uid}/settings/distinct-attribute`})}async getFilterableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/filterable-attributes`})}updateFilterableAttributes(t){return this.#c.put({path:`indexes/${this.uid}/settings/filterable-attributes`,body:t})}resetFilterableAttributes(){return this.#c.delete({path:`indexes/${this.uid}/settings/filterable-attributes`})}async getSortableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/sortable-attributes`})}updateSortableAttributes(t){return this.#c.put({path:`indexes/${this.uid}/settings/sortable-attributes`,body:t})}resetSortableAttributes(){return this.#c.delete({path:`indexes/${this.uid}/settings/sortable-attributes`})}async getSearchableAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/searchable-attributes`})}updateSearchableAttributes(t){return this.#c.put({path:`indexes/${this.uid}/settings/searchable-attributes`,body:t})}resetSearchableAttributes(){return this.#c.delete({path:`indexes/${this.uid}/settings/searchable-attributes`})}async getDisplayedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/displayed-attributes`})}updateDisplayedAttributes(t){return this.#c.put({path:`indexes/${this.uid}/settings/displayed-attributes`,body:t})}resetDisplayedAttributes(){return this.#c.delete({path:`indexes/${this.uid}/settings/displayed-attributes`})}async getTypoTolerance(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/typo-tolerance`})}updateTypoTolerance(t){return this.#c.patch({path:`indexes/${this.uid}/settings/typo-tolerance`,body:t})}resetTypoTolerance(){return this.#c.delete({path:`indexes/${this.uid}/settings/typo-tolerance`})}async getFaceting(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/faceting`})}updateFaceting(t){return this.#c.patch({path:`indexes/${this.uid}/settings/faceting`,body:t})}resetFaceting(){return this.#c.delete({path:`indexes/${this.uid}/settings/faceting`})}async getSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/separator-tokens`})}updateSeparatorTokens(t){return this.#c.put({path:`indexes/${this.uid}/settings/separator-tokens`,body:t})}resetSeparatorTokens(){return this.#c.delete({path:`indexes/${this.uid}/settings/separator-tokens`})}async getNonSeparatorTokens(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/non-separator-tokens`})}updateNonSeparatorTokens(t){return this.#c.put({path:`indexes/${this.uid}/settings/non-separator-tokens`,body:t})}resetNonSeparatorTokens(){return this.#c.delete({path:`indexes/${this.uid}/settings/non-separator-tokens`})}async getDictionary(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/dictionary`})}updateDictionary(t){return this.#c.put({path:`indexes/${this.uid}/settings/dictionary`,body:t})}resetDictionary(){return this.#c.delete({path:`indexes/${this.uid}/settings/dictionary`})}async getProximityPrecision(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/proximity-precision`})}updateProximityPrecision(t){return this.#c.put({path:`indexes/${this.uid}/settings/proximity-precision`,body:t})}resetProximityPrecision(){return this.#c.delete({path:`indexes/${this.uid}/settings/proximity-precision`})}async getEmbedders(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/embedders`})}updateEmbedders(t){return this.#c.patch({path:`indexes/${this.uid}/settings/embedders`,body:t})}resetEmbedders(){return this.#c.delete({path:`indexes/${this.uid}/settings/embedders`})}async getSearchCutoffMs(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}updateSearchCutoffMs(t){return this.#c.put({path:`indexes/${this.uid}/settings/search-cutoff-ms`,body:t})}resetSearchCutoffMs(){return this.#c.delete({path:`indexes/${this.uid}/settings/search-cutoff-ms`})}async getLocalizedAttributes(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/localized-attributes`})}updateLocalizedAttributes(t){return this.#c.put({path:`indexes/${this.uid}/settings/localized-attributes`,body:t})}resetLocalizedAttributes(){return this.#c.delete({path:`indexes/${this.uid}/settings/localized-attributes`})}async getFacetSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/facet-search`})}updateFacetSearch(t){return this.#c.put({path:`indexes/${this.uid}/settings/facet-search`,body:t})}resetFacetSearch(){return this.#c.delete({path:`indexes/${this.uid}/settings/facet-search`})}async getPrefixSearch(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/prefix-search`})}updatePrefixSearch(t){return this.#c.put({path:`indexes/${this.uid}/settings/prefix-search`,body:t})}resetPrefixSearch(){return this.#c.delete({path:`indexes/${this.uid}/settings/prefix-search`})}async getChat(){return await this.httpRequest.get({path:`indexes/${this.uid}/settings/chat`})}updateChat(t){return this.#c.patch({path:`indexes/${this.uid}/settings/chat`,body:t})}}class y{#u;constructor(t){this.#u=t}async getBatch(t){return await this.#u.get({path:`batches/${t}`})}async getBatches(t){return await this.#u.get({path:"batches",params:t})}}class g{#u;#l;constructor(t,e){this.#u=t,this.#l=e}async get(){return await this.#u.get({path:`chats/${this.#l}/settings`})}async update(t){return await this.#u.patch({path:`chats/${this.#l}/settings`,body:t})}async reset(){await this.#u.delete({path:`chats/${this.#l}/settings`})}async streamCompletion(t){if(!t.stream)throw Error("The SDK only supports streaming");return await this.#u.postStream({path:`chats/${this.#l}/chat/completions`,body:t})}}class R{config;httpRequest;#y;get tasks(){return this.#y}#g;get batches(){return this.#g}#c;constructor(t){this.config=t,this.httpRequest=new u(t),this.#y=new p(this.httpRequest,t.defaultWaitOptions),this.#g=new y(this.httpRequest),this.#c=c(this.httpRequest,this.tasks)}index(t){return new l(this.config,t)}async getIndex(t){return new l(this.config,t).fetchInfo()}async getRawIndex(t){return new l(this.config,t).getRawInfo()}async getIndexes(t){let e=await this.getRawIndexes(t),s=e.results.map(t=>new l(this.config,t.uid,t.primaryKey));return{...e,results:s}}async getRawIndexes(t){return await this.httpRequest.get({path:"indexes",params:t})}createIndex(t,e){return l.create(t,e,this.config)}updateIndex(t,e){return new l(this.config,t).update(e)}deleteIndex(t){return new l(this.config,t).delete()}async deleteIndexIfExists(t){try{return await this.deleteIndex(t),!0}catch(t){if(t?.cause?.code==="index_not_found")return!1;throw t}}swapIndexes(t){return this.#c.post({path:"swap-indexes",body:t})}async multiSearch(t,e){return await this.httpRequest.post({path:"multi-search",body:t,extraRequestInit:e})}chat(t){return new g(this.httpRequest,t)}async getChatWorkspaces(){return await this.httpRequest.get({path:"chats"})}async getWebhooks(){return await this.httpRequest.get({path:"webhooks"})}async getWebhook(t){return await this.httpRequest.get({path:`webhooks/${t}`})}async createWebhook(t){return await this.httpRequest.post({path:"webhooks",body:t})}async updateWebhook(t,e){return await this.httpRequest.patch({path:`webhooks/${t}`,body:e})}async deleteWebhook(t){await this.httpRequest.delete({path:`webhooks/${t}`})}async getNetwork(){return await this.httpRequest.get({path:"network"})}initializeNetwork(t){return this.#c.patch({path:"network",body:{self:t.self,leader:t.self,remotes:t.remotes}})}addRemote(t){return this.#c.patch({path:"network",body:{remotes:{[t.name]:t.remote}}})}removeRemote(t){return this.#c.patch({path:"network",body:{remotes:{[t.name]:null}}})}async getKeys(t){let e=await this.httpRequest.get({path:"keys",params:t});return e.results=e.results.map(t=>({...t,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt)})),e}async getKey(t){return await this.httpRequest.get({path:`keys/${t}`})}async createKey(t){return await this.httpRequest.post({path:"keys",body:t})}async updateKey(t,e){return await this.httpRequest.patch({path:`keys/${t}`,body:e})}async deleteKey(t){await this.httpRequest.delete({path:`keys/${t}`})}async health(){return await this.httpRequest.get({path:"health"})}async isHealthy(){try{let{status:t}=await this.health();return"available"===t}catch{return!1}}async getStats(){return await this.httpRequest.get({path:"stats"})}async getVersion(){return await this.httpRequest.get({path:"version"})}createDump(){return this.#c.post({path:"dumps"})}createSnapshot(){return this.#c.post({path:"snapshots"})}async getExperimentalFeatures(){return await this.httpRequest.get({path:"experimental-features"})}async updateExperimentalFeatures(t){return await this.httpRequest.patch({path:"experimental-features",body:t})}}t.s(["MeiliSearch",()=>R])},42559,t=>t.a(async(e,s)=>{try{var i=t.i(65731),a=t.i(66565),r=t.i(33863),n=e([r]);[r]=n.then?(await n)():n;let o=new a.MeiliSearch({host:process.env.MEILISEARCH_HOST||"http://127.0.0.1:7700",apiKey:process.env.MEILISEARCH_KEY||"masterKey"}),d="projobs_search";async function h(t){let{searchParams:e}=new URL(t.url),s=e.get("taxonomy"),a=e.get("q");if("categories"===s){let t=await r.db?.job_category?.findMany?.({select:{name:!0,category_id:!0}})??[];return i.NextResponse.json(t.map(t=>({name:t.name,id:t.category_id})))}if("functions"===s){let t=await r.db?.job_function?.findMany?.({select:{name:!0,function_id:!0}})??[];return i.NextResponse.json(t.map(t=>({name:t.name,id:t.function_id})))}if("locations"===s||!a)return i.NextResponse.json([]);try{let t=o.index(d);try{let e=await t.getStats();0===e.numberOfDocuments&&await u(t)}catch(e){"index_not_found"===e.code&&(await o.createIndex(d,{primaryKey:"id"}),await u(t))}let e=async()=>t.search(a,{limit:100,attributesToRetrieve:["text","type"],attributesToSearchOn:["text"],showMatchesPosition:!0}),s=await e();0===s.hits.length&&(await u(t),s=await e()),console.log(`Query: "${a}" -> Hits: ${s.hits.length}`);let r=s.hits.map(t=>({text:t.text,type:t.type||"unknown"})).filter(t=>"string"==typeof t.text&&t.text.length>0);return i.NextResponse.json(r)}catch(t){return console.error("Meilisearch Error:",t),i.NextResponse.json([])}}async function u(t){console.log("Seeding Meilisearch Index from Database...");let e=r.db?.jobCategory,s=r.db?.jobFunction,i=e?.findMany?await e.findMany():[],a=s?.findMany?await s.findMany():[],n=await r.db.job.findMany(),h=i.map(t=>({id:`cat-${t.category_id}`,text:t.name,type:"category"})),u=a.map(t=>({id:`func-${t.function_id}`,text:t.name,type:"function"})),d=n.map(t=>({id:`job-${t.id}`,text:t.title||"",company:t.metadata&&t.metadata.company||null,type:"job"})).filter(t=>t.text.length>0),p=Array.from(new Set(n.map(t=>t.metadata&&t.metadata.company||null))).filter(Boolean).map((t,e)=>({id:`comp-${e}`,text:t,type:"company"})),c=Array.from(new Set(n.map(t=>t.metadata&&t.metadata.organization||null))).filter(Boolean).map((t,e)=>({id:`organization-${e}`,text:t,type:"organization"})),l=[...h,...u,...d,...p,...c],y=await t.addDocuments(l);console.log(`Seeding task enqueued: ${y.taskUid}`),await o.waitForTask(y.taskUid),console.log("Seeding complete.")}t.s(["GET",()=>h]),s()}catch(t){s(t)}},!1),33351,t=>t.a(async(e,s)=>{try{var i=t.i(649),a=t.i(33955),r=t.i(7742),n=t.i(8607),h=t.i(26048),u=t.i(45664),o=t.i(62836),d=t.i(86656),p=t.i(56763),c=t.i(79655),l=t.i(63940),y=t.i(40093),g=t.i(67637),R=t.i(24592),m=t.i(47397),w=t.i(93695);t.i(79551);var b=t.i(22948),q=t.i(42559),f=e([q]);[q]=f.then?(await f)():f;let k=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/search/route",pathname:"/api/search",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/projobs/src/app/api/search/route.ts",nextConfigOutput:"",userland:q}),{workAsyncStorage:$,workUnitAsyncStorage:S,serverHooks:v}=k;function x(){return(0,r.patchFetch)({workAsyncStorage:$,workUnitAsyncStorage:S})}async function T(t,e,s){k.isDev&&(0,n.addRequestMeta)(t,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/search/route";i=i.replace(/\/index$/,"")||"/";let r=await k.prepare(t,e,{srcPage:i,multiZoneDraftMode:!1});if(!r)return e.statusCode=400,e.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:q,params:f,nextConfig:x,parsedUrl:T,isDraftMode:$,prerenderManifest:S,routerServerContext:v,isOnDemandRevalidate:W,revalidateOnlyGenerated:A,resolvedPathname:E,clientReferenceManifest:C,serverActionsManifest:I}=r,D=(0,o.normalizeAppPath)(i),P=!!(S.dynamicRoutes[D]||S.routes[E]),O=async()=>((null==v?void 0:v.render404)?await v.render404(t,e,T,!1):e.end("This page could not be found"),null);if(P&&!$){let t=!!S.routes[E],e=S.dynamicRoutes[D];if(e&&!1===e.fallback&&!t){if(x.experimental.adapterPath)return await O();throw new w.NoFallbackError}}let j=null;!P||k.isDev||$||(j=E,j="/index"===j?"/":j);let F=!0===k.isDev||!P,M=P&&!F;I&&C&&(0,u.setManifestsSingleton)({page:i,clientReferenceManifest:C,serverActionsManifest:I});let N=t.method||"GET",_=(0,h.getTracer)(),H=_.getActiveScopeSpan(),K={params:f,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!x.experimental.authInterrupts},cacheComponents:!!x.cacheComponents,supportsDynamicResponse:F,incrementalCache:(0,n.getRequestMeta)(t,"incrementalCache"),cacheLifeProfiles:x.cacheLife,waitUntil:s.waitUntil,onClose:t=>{e.on("close",t)},onAfterTaskError:void 0,onInstrumentationRequestError:(e,s,i,a)=>k.onRequestError(t,e,i,a,v)},sharedContext:{buildId:q}},U=new d.NodeNextRequest(t),L=new d.NodeNextResponse(e),B=p.NextRequestAdapter.fromNodeNextRequest(U,(0,p.signalFromNodeResponse)(e));try{let r=async t=>k.handle(B,K).finally(()=>{if(!t)return;t.setAttributes({"http.status_code":e.statusCode,"next.rsc":!1});let s=_.getRootSpanAttributes();if(!s)return;if(s.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${s.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=s.get("next.route");if(a){let e=`${N} ${a}`;t.setAttributes({"next.route":a,"http.route":a,"next.span_name":e}),t.updateName(e)}else t.updateName(`${N} ${i}`)}),u=!!(0,n.getRequestMeta)(t,"minimalMode"),o=async n=>{var h,o;let d=async({previousCacheEntry:a})=>{try{if(!u&&W&&A&&!a)return e.statusCode=404,e.setHeader("x-nextjs-cache","REVALIDATED"),e.end("This page could not be found"),null;let i=await r(n);t.fetchMetrics=K.renderOpts.fetchMetrics;let h=K.renderOpts.pendingWaitUntil;h&&s.waitUntil&&(s.waitUntil(h),h=void 0);let o=K.renderOpts.collectedTags;if(!P)return await (0,y.sendResponse)(U,L,i,K.renderOpts.pendingWaitUntil),null;{let t=await i.blob(),e=(0,g.toNodeOutgoingHttpHeaders)(i.headers);o&&(e[m.NEXT_CACHE_TAGS_HEADER]=o),!e["content-type"]&&t.type&&(e["content-type"]=t.type);let s=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=m.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=m.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:b.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await t.arrayBuffer()),headers:e},cacheControl:{revalidate:s,expire:a}}}}catch(e){throw(null==a?void 0:a.isStale)&&await k.onRequestError(t,e,{routerKind:"App Router",routePath:i,routeType:"route",revalidateReason:(0,l.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:W})},!1,v),e}},p=await k.handleResponse({req:t,nextConfig:x,cacheKey:j,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:W,revalidateOnlyGenerated:A,responseGenerator:d,waitUntil:s.waitUntil,isMinimalMode:u});if(!P)return null;if((null==p||null==(h=p.value)?void 0:h.kind)!==b.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(o=p.value)?void 0:o.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});u||e.setHeader("x-nextjs-cache",W?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),$&&e.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,g.fromNodeOutgoingHttpHeaders)(p.value.headers);return u&&P||c.delete(m.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||e.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,R.getCacheControlHeader)(p.cacheControl)),await (0,y.sendResponse)(U,L,new Response(p.value.body,{headers:c,status:p.value.status||200})),null};H?await o(H):await _.withPropagatedContext(t.headers,()=>_.trace(c.BaseServerSpan.handleRequest,{spanName:`${N} ${i}`,kind:h.SpanKind.SERVER,attributes:{"http.method":N,"http.target":t.url}},o))}catch(e){if(e instanceof w.NoFallbackError||await k.onRequestError(t,e,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,l.getRevalidateReason)({isStaticGeneration:M,isOnDemandRevalidate:W})},!1,v),P)throw e;return await (0,y.sendResponse)(U,L,new Response(null,{status:500})),null}}t.s(["handler",()=>T,"patchFetch",()=>x,"routeModule",()=>k,"serverHooks",()=>v,"workAsyncStorage",()=>$,"workUnitAsyncStorage",()=>S]),s()}catch(t){s(t)}},!1)];

//# sourceMappingURL=projobs_afc74aed._.js.map