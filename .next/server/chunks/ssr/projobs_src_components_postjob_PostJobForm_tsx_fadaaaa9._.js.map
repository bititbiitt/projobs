{"version":3,"sources":["../../../../../projobs/src/components/postjob/PostJobForm.tsx","../../../../../projobs/src/components/editor/QuillEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef } from \"react\";\r\nimport QuillEditor from '@/components/editor/QuillEditor';\r\n\r\n// lightweight id generator to avoid adding a runtime dependency\r\nconst genId = () => `${Date.now().toString(36)}-${Math.random().toString(36).slice(2,9)}`;\r\n\r\nexport default function PostJobForm() {\r\n  const [tab, setTab] = useState<\"details\" | \"questions\">(\"details\");\r\n  const [description, setDescription] = useState<string>(\"\");\r\n  const [requirements, setRequirements] = useState<string>(\"\");\r\n  const [minimumQualifications, setMinimumQualifications] = useState<string>(\"\");\r\n  const [benefits, setBenefits] = useState<string>(\"\");\r\n  const [scoringCriteria, setScoringCriteria] = useState<string>(\"\");\r\n  \r\n  // Questions tab state\r\n  const [uploadedFileName, setUploadedFileName] = useState<string | null>(null);\r\n  const [parsedQuestions, setParsedQuestions] = useState<Array<any>>([]);\r\n  const [defaultCategory, setDefaultCategory] = useState<'agency' | 'job'>('job');\r\n  const [previewAsApplicant, setPreviewAsApplicant] = useState<boolean>(false);\r\n  const [editingQuestionId, setEditingQuestionId] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n  const editingInputRef = useRef<HTMLInputElement | null>(null);\r\n  const inputRefs = React.useRef<Record<string, HTMLInputElement | null>>({});\r\n  const [includeQuestions, setIncludeQuestions] = useState<boolean>(true);\r\n  // kept for compatibility with older templates that toggled a client-side preview\r\n  const [showUploadedPreview, setShowUploadedPreview] = useState<boolean>(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<boolean>(false);\r\n\r\n  // Drag-and-drop handlers\r\n  const handlePaletteDragStart = (e: React.DragEvent, type: string, label: string) => {\r\n    const payload = { source: 'palette', type, label };\r\n    e.dataTransfer.setData('application/json', JSON.stringify(payload));\r\n    e.dataTransfer.effectAllowed = 'copy';\r\n  };\r\n\r\n  const handleQuestionDragStart = (e: React.DragEvent, id: string) => {\r\n    const payload = { source: 'question', id };\r\n    e.dataTransfer.setData('application/json', JSON.stringify(payload));\r\n    e.dataTransfer.effectAllowed = 'move';\r\n  };\r\n\r\n  const handleAllowDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'copy';\r\n  };\r\n\r\n  const insertIntoCategory = (items: any[], category: 'agency' | 'job', newItem: any, atIndex?: number) => {\r\n    // Find insertion index in the global items array so that items of same category remain grouped\r\n    const all = [...items];\r\n    // If atIndex is provided (global index), insert there\r\n    if (typeof atIndex === 'number') {\r\n      all.splice(atIndex, 0, newItem);\r\n      return all;\r\n    }\r\n    // Otherwise append after last item of that category\r\n    let lastIndex = -1;\r\n    for (let i = 0; i < all.length; i++) if (all[i].category === category) lastIndex = i;\r\n    if (lastIndex === -1) {\r\n      // find first index of other category to insert before, or push\r\n      const firstOther = all.findIndex(a => a.category !== category);\r\n      if (firstOther === -1) { all.push(newItem); return all; }\r\n      all.splice(firstOther, 0, newItem); return all;\r\n    }\r\n    all.splice(lastIndex + 1, 0, newItem);\r\n    return all;\r\n  };\r\n\r\n  const addQuestion = (q: any) => {\r\n    setParsedQuestions((s) => {\r\n      const next = [...s, q];\r\n      return next;\r\n    });\r\n    // focus/edit after render\r\n    setTimeout(() => setEditingQuestionId(q.id), 0);\r\n  };\r\n\r\n  const handleDropOnCategory = (e: React.DragEvent, category: 'agency' | 'job') => {\r\n    e.preventDefault();\r\n    try {\r\n      const raw = e.dataTransfer.getData('application/json');\r\n      if (!raw) return;\r\n      const data = JSON.parse(raw);\r\n      if (data.source === 'palette') {\r\n        const q = { id: genId(), type: data.type, label: data.label, category };\r\n        setParsedQuestions((s) => insertIntoCategory(s, category, q));\r\n      } else if (data.source === 'question') {\r\n        // change category of existing question and move it to end of target category\r\n        setParsedQuestions((s) => {\r\n          const item = s.find(x => x.id === data.id);\r\n          if (!item) return s;\r\n          const others = s.filter(x => x.id !== data.id);\r\n          const moved = { ...item, category };\r\n          return insertIntoCategory(others, category, moved);\r\n        });\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const handleDropOnQuestion = (e: React.DragEvent, targetId: string) => {\r\n    e.preventDefault();\r\n    try {\r\n      const raw = e.dataTransfer.getData('application/json');\r\n      if (!raw) return;\r\n      const data = JSON.parse(raw);\r\n      if (data.source === 'question') {\r\n        setParsedQuestions((s) => {\r\n          const all = [...s];\r\n          const from = all.findIndex(x => x.id === data.id);\r\n          const to = all.findIndex(x => x.id === targetId);\r\n          if (from === -1 || to === -1 || from === to) return s;\r\n          const [item] = all.splice(from, 1);\r\n          all.splice(to, 0, item);\r\n          return all;\r\n        });\r\n      } else if (data.source === 'palette') {\r\n        // add new item before target\r\n        setParsedQuestions((s) => {\r\n          const all = [...s];\r\n          const to = all.findIndex(x => x.id === targetId);\r\n          const q = { id: genId(), type: data.type, label: data.label, category: (all[to]?.category ?? defaultCategory) };\r\n          all.splice(to, 0, q);\r\n          return all;\r\n        });\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // Keyboard helpers for question cards\r\n  const moveQuestion = (id: string, direction: 'up' | 'down') => {\r\n    setParsedQuestions((s) => {\r\n      const all = [...s];\r\n      const idx = all.findIndex(x => x.id === id);\r\n      if (idx === -1) return s;\r\n      const swapWith = direction === 'up' ? idx - 1 : idx + 1;\r\n      if (swapWith < 0 || swapWith >= all.length) return s;\r\n      const tmp = all[swapWith]; all[swapWith] = all[idx]; all[idx] = tmp; return all;\r\n    });\r\n  };\r\n\r\n  // helpers for common question operations (kept out of JSX to simplify parsing)\r\n  const deleteQuestion = (id: string) => setParsedQuestions((s) => s.filter(item => item.id !== id));\r\n  const changeQuestionCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => s.map(item => item.id === id ? {...item, category } : item));\r\n  const moveQuestionUpInCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => {\r\n    const all = [...s];\r\n    const pos = all.findIndex(x => x.id === id);\r\n    if (pos <= 0) return all;\r\n    let prevPos = -1;\r\n    for (let i = pos - 1; i >= 0; i--) if (all[i].category === category) { prevPos = i; break; }\r\n    if (prevPos === -1) return all;\r\n    const tmp = all[prevPos]; all[prevPos] = all[pos]; all[pos] = tmp; return all;\r\n  });\r\n  const moveQuestionDownInCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => {\r\n    const all = [...s];\r\n    const pos = all.findIndex(x => x.id === id);\r\n    if (pos === -1) return all;\r\n    let nextPos = -1;\r\n    for (let i = pos + 1; i < all.length; i++) if (all[i].category === category) { nextPos = i; break; }\r\n    if (nextPos === -1) return all;\r\n    const tmp = all[nextPos]; all[nextPos] = all[pos]; all[pos] = tmp; return all;\r\n  });\r\n\r\n  // Option editing helpers\r\n  const updateOption = (id: string, index: number, value: string) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    opts[index] = value;\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const addOption = (id: string, value = 'New option') => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options, value] : [value];\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const removeOption = (id: string, index: number) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    opts.splice(index, 1);\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const moveOption = (id: string, from: number, to: number) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    if (from < 0 || from >= opts.length || to < 0 || to >= opts.length) return item;\r\n    const [opt] = opts.splice(from, 1);\r\n    opts.splice(to, 0, opt);\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  // Format phone as (XXX) XXX-XXXX while typing\r\n  const formatPhone = (input: string) => {\r\n    const digits = String(input || '').replace(/\\D/g, '').slice(0, 10);\r\n    if (digits.length === 0) return '';\r\n    if (digits.length <= 3) return `(${digits}`;\r\n    if (digits.length <= 6) return `(${digits.slice(0,3)}) ${digits.slice(3)}`;\r\n    return `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`;\r\n  };\r\n\r\n  const isValidPhone = (s?: string) => {\r\n    if (!s) return false;\r\n    const digits = String(s).replace(/\\D/g, '');\r\n    return digits.length === 10;\r\n  };\r\n\r\n  const isValidEmail = (s?: string) => {\r\n    if (!s) return false;\r\n    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return re.test(String(s));\r\n  };\r\n\r\n  // Normalize email while typing: trim, lowercase, remove spaces, ensure single @\r\n  const formatEmail = (input: string) => {\r\n    let s = String(input || '').trim().toLowerCase();\r\n    // remove internal whitespace\r\n    s = s.replace(/\\s+/g, '');\r\n    // keep only the first @ if multiple\r\n    const at = s.indexOf('@');\r\n    if (at !== -1) {\r\n      s = s.slice(0, at + 1) + s.slice(at + 1).replace(/@/g, '');\r\n    }\r\n    // clamp length to a reasonable limit\r\n    return s.slice(0, 254);\r\n  };\r\n\r\n  const renderQuestionCard = (q: any) => (\r\n    <div key={q.id} tabIndex={0} onKeyDown={(e) => handleQuestionKey(e, q)} draggable onDragStart={(e) => handleQuestionDragStart(e, q.id)} onDragOver={(e) => e.preventDefault()} onDrop={(e) => handleDropOnQuestion(e, q.id)} className=\"border rounded p-3 bg-gray-50\">\r\n      <div className=\"w-full flex items-center justify-between gap-4\">\r\n        <div className=\"flex-1\" />\r\n\r\n        <div className=\"flex-shrink-0\">\r\n          <select value={q.category} onChange={(e) => changeQuestionCategory(q.id, e.target.value as 'agency'|'job')} className=\"rounded border px-2 py-1 text-sm\">\r\n            <option value=\"agency\">Agency-Wide</option>\r\n            <option value=\"job\">Job-Specific</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex-shrink-0 flex items-center gap-2\">\r\n          <label className=\"flex items-center text-sm gap-2\">\r\n            <input type=\"checkbox\" checked={!!q.required} onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? {...item, required: e.target.checked } : item))} />\r\n            <span>Required</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-3 w-full\">\r\n        {editingQuestionId === q.id ? (\r\n          <input\r\n            ref={(el) => { editingInputRef.current = el; }}\r\n            autoFocus\r\n            value={q.label}\r\n            onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, label: e.target.value } : item))}\r\n            onBlur={() => setEditingQuestionId(null)}\r\n            className=\"text-sm font-medium w-full rounded border px-2 py-1\"\r\n          />\r\n        ) : (\r\n          <div className=\"text-sm font-medium\" onDoubleClick={() => setEditingQuestionId(q.id)}>{q.label}</div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"text-xs text-gray-500 mt-2\">Type: {q.type}</div>\r\n      {/* Inline options editor for choice-like controls */}\r\n      {(['radio','checkbox','dropdown'] as string[]).includes(q.type) && (\r\n        <div className=\"mt-3\">\r\n          {(q.options||[]).map((opt: string, i: number) => (\r\n            <div key={i} className=\"flex items-center gap-2 mt-2\">\r\n              <input value={opt} onChange={(e) => updateOption(q.id, i, e.target.value)} className=\"flex-1 rounded border px-2 py-1 text-sm\" />\r\n              <button onClick={() => moveOption(q.id, i, Math.max(0, i-1))} className=\"px-2 py-1 text-xs bg-gray-100 rounded\">↑</button>\r\n              <button onClick={() => moveOption(q.id, i, Math.min((q.options||[]).length-1, i+1))} className=\"px-2 py-1 text-xs bg-gray-100 rounded\">↓</button>\r\n              <button onClick={() => removeOption(q.id, i)} className=\"px-2 py-1 text-xs text-red-600\">Delete</button>\r\n            </div>\r\n          ))}\r\n          <div className=\"mt-2\">\r\n            <button onClick={() => addOption(q.id)} className=\"px-3 py-1 text-sm bg-white border rounded\">Add option</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end items-center gap-2 mt-3\">\r\n        <button onClick={() => setEditingQuestionId(q.id)} className=\"text-sm text-gray-700\">Edit</button>\r\n        <button onClick={() => moveQuestionUpInCategory(q.id, q.category)} className=\"text-sm text-gray-600\">Up</button>\r\n        <button onClick={() => moveQuestionDownInCategory(q.id, q.category)} className=\"text-sm text-gray-600\">Down</button>\r\n        <button onClick={() => deleteQuestion(q.id)} className=\"text-sm text-red-600\">Delete</button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // focus the inline input when editingQuestionId changes\r\n  React.useEffect(() => {\r\n    if (editingQuestionId && editingInputRef.current) {\r\n      try { editingInputRef.current.focus(); editingInputRef.current.select(); } catch (e) {}\r\n    }\r\n  }, [editingQuestionId]);\r\n\r\n  const renderPreviewForQuestion = (q: any, idx: number) => {\r\n    const requiredMark = q.required ? <span className=\"text-red-600 ml-2\">*</span> : null;\r\n    switch (q.type) {\r\n      case 'text':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <input className=\"mt-2 w-full rounded border p-2\" placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n      case 'textarea':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <textarea className=\"mt-2 w-full rounded border p-2\" rows={4} placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n      case 'radio':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2 space-y-1\">\r\n              {(q.options||[]).map((opt: string, i: number) => (\r\n                <label key={i} className=\"flex items-center gap-2 text-sm\"><input type=\"radio\" name={`q_${q.id}`} />{opt}</label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'checkbox':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2 space-y-1\">\r\n              {(q.options||[]).map((opt: string, i: number) => (\r\n                <label key={i} className=\"flex items-center gap-2 text-sm\"><input type=\"checkbox\" />{opt}</label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'dropdown':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <select className=\"mt-2 w-full rounded border p-2\">\r\n              <option>Please select one</option>\r\n              {(q.options||[]).map((opt: string, i: number) => (<option key={i}>{opt}</option>))}\r\n            </select>\r\n          </div>\r\n        );\r\n      case 'date':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2\">\r\n              <input\r\n                type=\"date\"\r\n                value={q.value ? String(q.value).slice(0,10) : ''}\r\n                onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: e.target.value ? new Date(e.target.value).toISOString() : null } : item))}\r\n                onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }}\r\n                className=\"mt-2 w-full rounded border p-2\"\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'phone':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div>\r\n              <input\r\n                ref={(el) => { inputRefs.current[q.id] = el; }}\r\n                type=\"tel\"\r\n                className={`mt-2 w-full rounded border p-2 ${q.value && !isValidPhone(q.value) ? 'border-red-500' : ''}`}\r\n                placeholder=\"Phone number\"\r\n                value={q.value || ''}\r\n                onChange={(e) => {\r\n                  const formatted = formatPhone(e.target.value);\r\n                  setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: formatted } : item));\r\n                  // move caret to end after formatting\r\n                  setTimeout(() => {\r\n                    const el = inputRefs.current[q.id];\r\n                    if (el) {\r\n                      const pos = (formatted || '').length;\r\n                      try { el.setSelectionRange(pos, pos); } catch (err) {}\r\n                    }\r\n                  }, 0);\r\n                }}\r\n              />\r\n              {q.value && !isValidPhone(q.value) && (\r\n                <div className=\"text-xs text-red-600 mt-1\">Enter a 10-digit phone number</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'email':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div>\r\n              <input\r\n                ref={(el) => { inputRefs.current[q.id] = el; }}\r\n                type=\"email\"\r\n                className={`mt-2 w-full rounded border p-2 ${q.value && !isValidEmail(q.value) ? 'border-red-500' : ''}`}\r\n                placeholder=\"Email address\"\r\n                value={q.value || ''}\r\n                onChange={(e) => {\r\n                  const formatted = formatEmail(e.target.value);\r\n                  setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: formatted } : item));\r\n                  setTimeout(() => {\r\n                    const el = inputRefs.current[q.id];\r\n                    if (el) {\r\n                      const pos = (formatted || '').length;\r\n                      try { el.setSelectionRange(pos, pos); } catch (err) {}\r\n                    }\r\n                  }, 0);\r\n                }}\r\n              />\r\n              {q.value && !isValidEmail(q.value) && (\r\n                <div className=\"text-xs text-red-600 mt-1\">Enter a valid email address</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      default:\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <input className=\"mt-2 w-full rounded border p-2\" placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const handleQuestionKey = (e: React.KeyboardEvent, q: any) => {\r\n    if (e.key === 'Delete') {\r\n      setParsedQuestions((s) => s.filter(item => item.id !== q.id));\r\n      return;\r\n    }\r\n    if (e.key === 'Enter') {\r\n      // quick inline edit via prompt (keeps implementation simple)\r\n      const newLabel = prompt('Edit question label', q.label);\r\n      if (newLabel != null) {\r\n        setParsedQuestions((s) => s.map(item => item.id === q.id ? {...item, label: newLabel } : item));\r\n      }\r\n      return;\r\n    }\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowUp') {\r\n      moveQuestion(q.id, 'up');\r\n      return;\r\n    }\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowDown') {\r\n      moveQuestion(q.id, 'down');\r\n      return;\r\n    }\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    const jobPayload = {\r\n      title: 'New Job',\r\n      description,\r\n      requirements,\r\n      minimumQualifications,\r\n      benefits,\r\n      scoringCriteria,\r\n      includeQuestions,\r\n    };\r\n    try {\r\n      const res = await fetch('/api/post-job', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(jobPayload),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok) {\r\n        alert('Failed to create job');\r\n        return;\r\n      }\r\n      if (includeQuestions && parsedQuestions.length > 0) {\r\n        await handlePublishClientSide(parsedQuestions);\r\n      }\r\n      alert('Job published');\r\n    } catch (err) {\r\n      console.error('Publish error', err);\r\n      alert('Publish failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 bg-white rounded-xl shadow border border-gray-200 mt-6\">\r\n      <h2 className=\"text-lg font-semibold mb-1\">Create New Job Posting</h2>\r\n      <p className=\"text-sm text-gray-500 mb-4\">Fill in the details for your new job posting</p>\r\n\r\n      <div className=\"flex items-center border-b mb-5\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setTab(\"details\")}\r\n          className={`px-4 py-2 -mb-px font-semibold ${tab === \"details\" ? \"border-b-2 border-blue-600 text-blue-700\" : \"text-gray-400\"}`}\r\n        >\r\n          JOB DETAILS\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setTab(\"questions\")}\r\n          className={`px-4 py-2 -mb-px font-semibold ${tab === \"questions\" ? \"border-b-2 border-blue-600 text-blue-700\" : \"text-gray-400\"}`}\r\n        >\r\n          QUESTIONS\r\n        </button>\r\n      </div>\r\n\r\n      {tab === \"details\" ? (\r\n        <div className=\"space-y-6\">\r\n          {/* Basic Information */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Basic Information</h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Department</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select department</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New Department...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job / Exam Number *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., JOB2026-001\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Title *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., Web Developer...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Opening Date *</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Closing Date</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-gray-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Review Date</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-gray-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center mt-3\">\r\n              <input id=\"continuous\" type=\"checkbox\" className=\"h-4 w-4 text-blue-600 border-gray-300 rounded\" />\r\n              <label htmlFor=\"continuous\" className=\"ml-2 text-sm\">Continuous</label>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Location *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"City\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">State</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>State</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">ZIP</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"5-digit ZIP Code\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Type *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select type</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Work Site</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select work site</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Level</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select level</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Classification *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select Classification</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job classification...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Function *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select function</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job function...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Category *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select Category</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job category...\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Compensation */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Compensation</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Compensation Type</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Annual Salary</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Minimum Pay</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., 50,000.00\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Maximum Pay</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., 140,000.00\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Job Details */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Job Details</h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Job Description *</label>\r\n                <QuillEditor value={description} onChange={setDescription} placeholder=\"Please describe the role, responsibilities, and what a typical day looks like...\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Requirements *</label>\r\n                <QuillEditor value={requirements} onChange={setRequirements} placeholder=\"Please list the required qualifications, skills, and experience...\" />\r\n              </div>\r\n\r\n              \r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Benefits *</label>\r\n                <QuillEditor value={benefits} onChange={setBenefits} placeholder=\"Please describe the benefits and perks offered...\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Minimum Qualifications (moved below Benefits) */}\r\n          <section>\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Minimum Qualifications (MQ)</label>\r\n              <textarea\r\n                rows={3}\r\n                value={minimumQualifications}\r\n                onChange={(e) => setMinimumQualifications(e.target.value)}\r\n                className=\"w-full rounded border border-gray-300 p-3 text-sm\"\r\n                placeholder=\"e.g., Bachelor's degree in relevant field OR 5 years equivalent experience; Valid driver's license required; Must pass background check...\"\r\n              />\r\n            </div>\r\n          </section>\r\n\r\n          {/* Civil Service & Compliance */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Civil Service & Compliance</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Bargaining Unit</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select professional unit</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Pay Grade</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., Grade 12\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Education</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select education</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-4 mt-4\">\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Civil Service Exam</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Veteran Preference</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> FLSA</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Driver's license</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Reference</label>\r\n            </div>\r\n\r\n            <div className=\"mt-4\">\r\n              <label className=\"block text-sm font-medium mb-1\">Scoring Criteria</label>\r\n              <textarea\r\n                rows={3}\r\n                value={scoringCriteria}\r\n                onChange={(e) => setScoringCriteria(e.target.value)}\r\n                className=\"w-full rounded border border-gray-300 p-3 text-sm\"\r\n                placeholder=\"Describe the scoring criteria and weights (e.g., Education 30%, Experience 40%, Skills 30%)...\"\r\n              />\r\n            </div>\r\n          </section>\r\n\r\n          <div className=\"flex justify-center\">\r\n            <button onClick={handlePublish} className=\"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm\">\r\n              Publish Job\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <label className=\"flex items-center gap-3\">\r\n              <input type=\"checkbox\" checked={includeQuestions} onChange={(e) => setIncludeQuestions(e.target.checked)} className=\"h-4 w-4\" />\r\n              <span className=\"font-medium\">Include screening questions</span>\r\n              <span className=\"text-sm text-gray-500 ml-2\">(Optional — only add questions if required for this job)</span>\r\n            </label>\r\n          </div>\r\n          \r\n          \r\n          {!includeQuestions ? (\r\n            <div className=\"border rounded p-4 bg-gray-50 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-3\">Screening questions are disabled for this job.</p>\r\n              <button type=\"button\" onClick={() => setIncludeQuestions(true)} className=\"px-3 py-2 bg-blue-600 text-white rounded text-sm\">Enable Screening Questions</button>\r\n            </div>\r\n          ) : null}\r\n          <div className=\"border rounded-md p-4 flex items-center justify-between bg-gray-50\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"text-gray-400\">\r\n                <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                <path d=\"M14 2v6h6\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n              <div>\r\n                <p className=\"text-sm text-gray-700\">Upload PDF or Word document with pre-written questions here...</p>\r\n                <p className=\"text-xs text-gray-500\">Supported: .pdf, .doc, .docx</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <input ref={fileInputRef} type=\"file\" className=\"hidden\" accept=\".pdf,.doc,.docx,.txt\" onChange={async (e) => {\r\n                const file = e.target.files?.[0];\r\n                if (!file) return;\r\n                // warn before overwriting existing parsed content\r\n                if (uploadedFileName || parsedQuestions.length > 0) {\r\n                  const ok = confirm('Uploading a new file will overwrite any existing questions. Continue?');\r\n                  if (!ok) {\r\n                    e.currentTarget.value = '';\r\n                    return;\r\n                  }\r\n                }\r\n                setUploadedFileName(file.name);\r\n                // If this is a plain text file, parse client-side. Otherwise send to server parser and map results into questions/options.\r\n                const isText = file.type.startsWith('text/') || file.name.toLowerCase().endsWith('.txt');\r\n                if (isText) {\r\n                  try {\r\n                    const text = await file.text();\r\n                    const lines = text.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\r\n                    if (lines.length > 0) {\r\n                      const q = lines.slice(0, 50).map((line) => ({ id: genId(), type: 'text', label: line, category: defaultCategory, required: true }));\r\n                      setParsedQuestions(q);\r\n                      setTimeout(() => { if (q[0]?.id) setEditingQuestionId(q[0].id); }, 0);\r\n                    } else {\r\n                      const single = { id: genId(), type: 'text', label: file.name, category: defaultCategory, required: true };\r\n                      setParsedQuestions([single]);\r\n                      setTimeout(() => setEditingQuestionId(single.id), 0);\r\n                    }\r\n                  } catch (err) {\r\n                    const fallback = { id: genId(), type: 'text', label: `Uploaded: ${file.name} (parsing requires server)`, category: defaultCategory };\r\n                    setParsedQuestions([fallback]);\r\n                    setTimeout(() => setEditingQuestionId(fallback.id), 0);\r\n                  }\r\n                } else {\r\n                  // upload file first to create job_document_version, then call parse endpoint with versionId\r\n                  try {\r\n                    const arrayBuf = await file.arrayBuffer();\r\n                    // prepare base64 for server upload\r\n                    const bytes = new Uint8Array(arrayBuf);\r\n                    let binary = '';\r\n                    const chunk = 0x8000;\r\n                    for (let i = 0; i < bytes.length; i += chunk) {\r\n                      const slice = bytes.subarray(i, i + chunk);\r\n                      binary += String.fromCharCode.apply(null, Array.from(slice));\r\n                    }\r\n                    const b64 = btoa(binary);\r\n\r\n                    // call upload endpoint to create job_document + version\r\n                    let versionId: string | undefined = undefined;\r\n                    try {\r\n                      const up = await fetch('/api/post-job/upload-doc', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ name: file.name, mime: file.type, data: b64 })\r\n                      });\r\n                      const upJson = await up.json();\r\n                      if (upJson && upJson.ok && upJson.versionId) versionId = upJson.versionId;\r\n                    } catch (ux) {\r\n                      // ignore upload failure and continue to parse without versionId\r\n                    }\r\n\r\n                    // parse using server, passing versionId if available\r\n                    const res = await fetch('/api/post-job/parse-doc', {\r\n                      method: 'POST',\r\n                      headers: { 'Content-Type': 'application/json' },\r\n                      body: JSON.stringify({ name: file.name, mime: file.type, data: b64, versionId })\r\n                    });\r\n                    const json = await res.json();\r\n                    // save any returned html/text for preview\r\n                    // server may return HTML/text useful for parsing; we don't store client preview anymore\r\n\r\n                    // prefer structured parsed array from new parser, fallback to text/html parsing\r\n                    let parsed: any[] = [];\r\n                    if (json && json.ok && Array.isArray(json.parsed) && json.parsed.length > 0) {\r\n                      parsed = json.parsed.map((p: any) => ({ ...p, category: p.category ?? defaultCategory }));\r\n                    } else {\r\n                      const text = (json && json.ok && json.text) ? String(json.text) : (json && json.html ? String(json.html).replace(/<[^>]+>/g, '\\n') : '');\r\n                      const blocks = text.split(/\\n{2,}/).map(b => b.trim()).filter(Boolean).slice(0, 200);\r\n                      const stripOpt = (s: string) => s.replace(/^[\\-\\u2022\\*\\s]*/, '').replace(/^[0-9]+[\\).]\\s*/, '').replace(/^[a-zA-Z][\\).]\\s*/, '').trim();\r\n                      for (const blk of blocks) {\r\n                        const lines = blk.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\r\n                        if (lines.length === 0) continue;\r\n                        if (lines.length > 1) {\r\n                          const opts = lines.slice(1).filter(l => /^([\\-\\u2022\\*]|[0-9]+[\\).]|[a-zA-Z][\\).])/.test(l) || /^\\s*[-•*]/.test(l));\r\n                          if (opts.length >= 1) {\r\n                            const options = lines.slice(1).map(stripOpt).filter(Boolean);\r\n                            parsed.push({ id: genId(), type: 'radio', label: lines[0], options, category: defaultCategory, required: true });\r\n                            continue;\r\n                          }\r\n                        }\r\n                        parsed.push({ id: genId(), type: 'text', label: lines[0], category: defaultCategory, required: true });\r\n                      }\r\n                      if (parsed.length === 0) parsed.push({ id: genId(), type: 'text', label: `Uploaded: ${file.name} (no parseable content)`, category: defaultCategory, required: true });\r\n                    }\r\n\r\n                    setParsedQuestions(parsed);\r\n                    if (parsed.length > 0) setTimeout(() => setEditingQuestionId(parsed[0].id), 0);\r\n                  } catch (err) {\r\n                    const fallback2 = { id: genId(), type: 'text', label: `Uploaded: ${file.name} (parsing requires server)`, category: defaultCategory };\r\n                    setParsedQuestions([fallback2]);\r\n                    setTimeout(() => setEditingQuestionId(fallback2.id), 0);\r\n                  }\r\n                }\r\n              }} />\r\n              <button type=\"button\" onClick={() => fileInputRef.current?.click()} className=\"inline-flex items-center gap-2 px-3 py-2 bg-white border rounded text-sm hover:bg-gray-100\">\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"text-gray-600\">\r\n                  <path d=\"M12 5v14\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                  <path d=\"M19 12l-7-7-7 7\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n                Upload Questions\r\n              </button>\r\n              {uploadedFileName && (\r\n                <div>\r\n                  {!showDeleteConfirm ? (\r\n                    <button type=\"button\" onClick={() => setShowDeleteConfirm(true)} className=\"inline-flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded text-sm text-red-600 hover:bg-red-100\">\r\n                      Delete Upload\r\n                    </button>\r\n                  ) : (\r\n                    <div className=\"inline-flex items-center gap-2\">\r\n                      <span className=\"text-sm text-gray-700 mr-2\">Confirm delete?</span>\r\n                      <button type=\"button\" onClick={() => {\r\n                        setUploadedFileName(null);\r\n                        setParsedQuestions([]);\r\n                        if (fileInputRef.current) fileInputRef.current.value = '';\r\n                        setShowDeleteConfirm(false);\r\n                      }} className=\"px-3 py-1 bg-red-600 text-white rounded text-sm\">Delete</button>\r\n                      <button type=\"button\" onClick={() => setShowDeleteConfirm(false)} className=\"px-3 py-1 bg-white border rounded text-sm\">Cancel</button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n              <label className=\"text-sm text-gray-600\">Default category for new questions:</label>\r\n              <select value={defaultCategory} onChange={(e) => setDefaultCategory(e.target.value as 'agency'|'job')} className=\"rounded border px-2 py-1 text-sm\">\r\n                <option value=\"agency\">Agency-Wide Questions</option>\r\n                <option value=\"job\">Job-Specific Supplemental Questions</option>\r\n              </select>\r\n              <div className=\"ml-4\">\r\n                  <button\r\n                  type=\"button\"\r\n                  onClick={() => setPreviewAsApplicant((s) => !s)}\r\n                  aria-pressed={previewAsApplicant}\r\n                      className={`inline-flex items-center gap-2 px-3 py-1 text-sm rounded focus:outline-none focus:ring-2 ${previewAsApplicant ? 'bg-blue-600 text-white border border-blue-700 hover:bg-blue-700' : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-100'}`}\r\n                >\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className={`${previewAsApplicant ? 'text-white' : 'text-gray-600'}`}>\r\n                    <path d=\"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z\" stroke=\"currentColor\" strokeWidth=\"1.25\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" strokeWidth=\"1.25\" />\r\n                  </svg>\r\n                  <span>Preview as applicant</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-semibold text-base mb-2\">Screening Questions</h3>\r\n            <p className=\"text-sm text-gray-500 mb-4\">Build custom screening questions for applicants by clicking form elements.</p>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div className=\"col-span-1\">\r\n                <div className=\"bg-white border rounded p-4\">\r\n                  <h4 className=\"text-sm font-medium mb-3\">Form Elements</h4>\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'text', 'Short answer')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'text', label: 'Short answer', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Text Input</div>\r\n                      <div className=\"text-xs text-gray-400\">Single line text</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'textarea', 'Long answer')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'textarea', label: 'Long answer', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Text Area</div>\r\n                      <div className=\"text-xs text-gray-400\">Multi-line text</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'checkbox', 'Choose options')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'checkbox', label: 'Choose options', options: ['Option 1','Option 2'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Checkbox</div>\r\n                      <div className=\"text-xs text-gray-400\">Multiple choice</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'radio', 'Choose one')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'radio', label: 'Choose one', options: ['Option A','Option B'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Radio Buttons</div>\r\n                      <div className=\"text-xs text-gray-400\">Single choice</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'dropdown', 'Select')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'dropdown', label: 'Select', options: ['One','Two'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Dropdown</div>\r\n                      <div className=\"text-xs text-gray-400\">Select from list</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'date', 'Select date')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'date', label: 'Select date', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Date</div>\r\n                      <div className=\"text-xs text-gray-400\">Date picker</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'phone', 'Phone')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'phone', label: 'Phone', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Phone</div>\r\n                      <div className=\"text-xs text-gray-400\">Phone number</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'email', 'Email')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'email', label: 'Email', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Email</div>\r\n                      <div className=\"text-xs text-gray-400\">Email address</div>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <div className=\"min-h-[16rem] border-2 border-dashed rounded-lg p-4 bg-white space-y-4\">\r\n                  {/* Agency-Wide Questions */}\r\n                  <div onDragOver={handleAllowDrop} onDrop={(e) => handleDropOnCategory(e, 'agency')}>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className=\"text-sm font-medium\">Agency-Wide Questions</h4>\r\n                      <div className=\"text-xs text-gray-500\">{parsedQuestions.filter(q => q.category === 'agency').length} items</div>\r\n                    </div>\r\n                    {parsedQuestions.filter(q => q.category === 'agency').length === 0 ? (\r\n                      <div className=\"rounded p-4 bg-gray-50 text-center text-sm text-gray-400\">No agency-wide questions. Click an element to add.</div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                          {parsedQuestions.filter(q => q.category === 'agency').map(renderQuestionCard)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Job-Specific Questions */}\r\n                  <div onDragOver={handleAllowDrop} onDrop={(e) => handleDropOnCategory(e, 'job')}>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className=\"text-sm font-medium\">Job-Specific Supplemental Questions</h4>\r\n                      <div className=\"text-xs text-gray-500\">{parsedQuestions.filter(q => q.category === 'job').length} items</div>\r\n                    </div>\r\n                    {parsedQuestions.filter(q => q.category === 'job').length === 0 ? (\r\n                      <div className=\"rounded p-4 bg-gray-50 text-center text-sm text-gray-400\">No job-specific questions. Click an element to add.</div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                        {parsedQuestions.filter(q => q.category === 'job').map(renderQuestionCard)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {previewAsApplicant && (\r\n            <div className=\"mt-6\">\r\n              <h3 className=\"font-semibold text-base mb-3\">Preview — Applicant View</h3>\r\n                  <div className=\"border rounded p-4 bg-white\">\r\n                    {(() => {\r\n                      const agencyQs = parsedQuestions.filter((q) => q.category === 'agency');\r\n                      const jobQs = parsedQuestions.filter((q) => q.category === 'job');\r\n                      return (\r\n                        <>\r\n                          {agencyQs.length > 0 && (\r\n                            <div className=\"mb-4\">\r\n                              <h4 className=\"text-sm font-medium text-center\">Agency-Wide Questions</h4>\r\n                              <div className=\"mt-2\">\r\n                                {agencyQs.map((q, i) => renderPreviewForQuestion(q, i+1))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {jobQs.length > 0 && (\r\n                            <div>\r\n                              <h4 className=\"text-sm font-medium text-center\">Supplemental Questions</h4>\r\n                              <div className=\"mt-2\">\r\n                                {jobQs.map((q, i) => renderPreviewForQuestion(q, i+1))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {agencyQs.length === 0 && jobQs.length === 0 && (\r\n                            <div className=\"text-sm text-gray-400 text-center\">No screening questions to preview.</div>\r\n                          )}\r\n                        </>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n            </div>\r\n          )}\r\n\r\n          \r\n\r\n          <div className=\"border-t pt-6\">\r\n            <div className=\"flex justify-center\">\r\n              <button onClick={handlePublish} className=\"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm\">\r\n                Publish Job\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nasync function handlePublishClientSide(questions: any[]) {\r\n  // slim wrapper to POST the questions to server batch endpoint\r\n  const res = await fetch('/api/jobs/questions/batch', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ jobId: null, questions }),\r\n  });\r\n  return res.json();\r\n}\r\n","\"use client\";\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport \"quill/dist/quill.snow.css\";\r\n\r\ntype Props = {\r\n  value: string;\r\n  onChange: (val: string) => void;\r\n  placeholder?: string;\r\n};\r\n\r\nconst modules = {\r\n  toolbar: [\r\n    [{ header: [1, 2, 3, false] }],\r\n    [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n    [\"blockquote\", \"code-block\"],\r\n    [\"link\", \"image\"],\r\n    [\"clean\"],\r\n  ],\r\n};\r\n\r\nconst formats = [\r\n  \"header\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strike\",\r\n  \"list\",\r\n  \"blockquote\",\r\n  \"code-block\",\r\n  \"link\",\r\n  \"image\",\r\n];\r\n\r\nexport default function QuillEditor({ value, onChange, placeholder }: Props) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const quillRef = useRef<any>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      // import Quill only on client\r\n      const QuillModule = await import(\"quill\");\r\n      const Quill = QuillModule && (QuillModule.default ?? QuillModule);\r\n      if (!mounted || !containerRef.current) return;\r\n\r\n      quillRef.current = new Quill(containerRef.current, {\r\n        theme: \"snow\",\r\n        modules,\r\n        formats,\r\n        placeholder,\r\n      });\r\n\r\n      // set initial content\r\n      if (value) {\r\n        try {\r\n          quillRef.current.clipboard.dangerouslyPasteHTML(value);\r\n        } catch (e) {\r\n          quillRef.current.setText(value);\r\n        }\r\n      }\r\n\r\n      const handleChange = () => {\r\n        const html = containerRef.current?.querySelector('.ql-editor')?.innerHTML ?? \"\";\r\n        onChange(html === '<p><br></p>' ? '' : html);\r\n      };\r\n\r\n      quillRef.current.on('text-change', handleChange);\r\n\r\n      return () => {\r\n        mounted = false;\r\n        if (quillRef.current) {\r\n          quillRef.current.off('text-change', handleChange);\r\n          // Quill doesn't provide a destroy API; clear reference\r\n          quillRef.current = null;\r\n        }\r\n      };\r\n    })();\r\n  }, []);\r\n\r\n  // update editor when value prop changes externally\r\n  useEffect(() => {\r\n    const editor = quillRef.current;\r\n    if (!editor) return;\r\n    const current = containerRef.current?.querySelector('.ql-editor')?.innerHTML ?? '';\r\n    if (value !== current) {\r\n      const selection = editor.getSelection();\r\n      try {\r\n        editor.clipboard.dangerouslyPasteHTML(value || '');\r\n      } catch (e) {\r\n        editor.setText(value || '');\r\n      }\r\n      if (selection) editor.setSelection(selection);\r\n    }\r\n  }, [value]);\r\n\r\n  return (\r\n    <div>\r\n      <div ref={containerRef} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}