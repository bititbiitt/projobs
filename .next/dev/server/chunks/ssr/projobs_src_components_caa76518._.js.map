{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ILT/projobs/src/components/editor/QuillEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport \"quill/dist/quill.snow.css\";\r\n\r\ntype Props = {\r\n  value: string;\r\n  onChange: (val: string) => void;\r\n  placeholder?: string;\r\n};\r\n\r\nconst modules = {\r\n  toolbar: [\r\n    [{ header: [1, 2, 3, false] }],\r\n    [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n    [{ list: \"ordered\" }, { list: \"bullet\" }],\r\n    [\"blockquote\", \"code-block\"],\r\n    [\"link\", \"image\"],\r\n    [\"clean\"],\r\n  ],\r\n};\r\n\r\nconst formats = [\r\n  \"header\",\r\n  \"bold\",\r\n  \"italic\",\r\n  \"underline\",\r\n  \"strike\",\r\n  \"list\",\r\n  \"blockquote\",\r\n  \"code-block\",\r\n  \"link\",\r\n  \"image\",\r\n];\r\n\r\nexport default function QuillEditor({ value, onChange, placeholder }: Props) {\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const quillRef = useRef<any>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      // import Quill only on client\r\n      const QuillModule = await import(\"quill\");\r\n      const Quill = QuillModule && (QuillModule.default ?? QuillModule);\r\n      if (!mounted || !containerRef.current) return;\r\n\r\n      quillRef.current = new Quill(containerRef.current, {\r\n        theme: \"snow\",\r\n        modules,\r\n        formats,\r\n        placeholder,\r\n      });\r\n\r\n      // set initial content\r\n      if (value) {\r\n        try {\r\n          quillRef.current.clipboard.dangerouslyPasteHTML(value);\r\n        } catch (e) {\r\n          quillRef.current.setText(value);\r\n        }\r\n      }\r\n\r\n      const handleChange = () => {\r\n        const html = containerRef.current?.querySelector('.ql-editor')?.innerHTML ?? \"\";\r\n        onChange(html === '<p><br></p>' ? '' : html);\r\n      };\r\n\r\n      quillRef.current.on('text-change', handleChange);\r\n\r\n      return () => {\r\n        mounted = false;\r\n        if (quillRef.current) {\r\n          quillRef.current.off('text-change', handleChange);\r\n          // Quill doesn't provide a destroy API; clear reference\r\n          quillRef.current = null;\r\n        }\r\n      };\r\n    })();\r\n  }, []);\r\n\r\n  // update editor when value prop changes externally\r\n  useEffect(() => {\r\n    const editor = quillRef.current;\r\n    if (!editor) return;\r\n    const current = containerRef.current?.querySelector('.ql-editor')?.innerHTML ?? '';\r\n    if (value !== current) {\r\n      const selection = editor.getSelection();\r\n      try {\r\n        editor.clipboard.dangerouslyPasteHTML(value || '');\r\n      } catch (e) {\r\n        editor.setText(value || '');\r\n      }\r\n      if (selection) editor.setSelection(selection);\r\n    }\r\n  }, [value]);\r\n\r\n  return (\r\n    <div>\r\n      <div ref={containerRef} />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;;AAWA,MAAM,UAAU;IACd,SAAS;QACP;YAAC;gBAAE,QAAQ;oBAAC;oBAAG;oBAAG;oBAAG;iBAAM;YAAC;SAAE;QAC9B;YAAC;YAAQ;YAAU;YAAa;SAAS;QACzC;YAAC;gBAAE,MAAM;YAAU;YAAG;gBAAE,MAAM;YAAS;SAAE;QACzC;YAAC;YAAc;SAAa;QAC5B;YAAC;YAAQ;SAAQ;QACjB;YAAC;SAAQ;KACV;AACH;AAEA,MAAM,UAAU;IACd;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEc,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAE,WAAW,EAAS;IACzE,MAAM,eAAe,IAAA,0NAAM,EAAwB;IACnD,MAAM,WAAW,IAAA,0NAAM,EAAM;IAE7B,IAAA,6NAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,8BAA8B;YAC9B,MAAM,cAAc;YACpB,MAAM,QAAQ,eAAe,CAAC,YAAY,OAAO,IAAI,WAAW;YAChE,IAAI,CAAC,WAAW,CAAC,aAAa,OAAO,EAAE;YAEvC,SAAS,OAAO,GAAG,IAAI,MAAM,aAAa,OAAO,EAAE;gBACjD,OAAO;gBACP;gBACA;gBACA;YACF;YAEA,sBAAsB;YACtB,IAAI,OAAO;gBACT,IAAI;oBACF,SAAS,OAAO,CAAC,SAAS,CAAC,oBAAoB,CAAC;gBAClD,EAAE,OAAO,GAAG;oBACV,SAAS,OAAO,CAAC,OAAO,CAAC;gBAC3B;YACF;YAEA,MAAM,eAAe;gBACnB,MAAM,OAAO,aAAa,OAAO,EAAE,cAAc,eAAe,aAAa;gBAC7E,SAAS,SAAS,gBAAgB,KAAK;YACzC;YAEA,SAAS,OAAO,CAAC,EAAE,CAAC,eAAe;YAEnC,OAAO;gBACL,UAAU;gBACV,IAAI,SAAS,OAAO,EAAE;oBACpB,SAAS,OAAO,CAAC,GAAG,CAAC,eAAe;oBACpC,uDAAuD;oBACvD,SAAS,OAAO,GAAG;gBACrB;YACF;QACF,CAAC;IACH,GAAG,EAAE;IAEL,mDAAmD;IACnD,IAAA,6NAAS,EAAC;QACR,MAAM,SAAS,SAAS,OAAO;QAC/B,IAAI,CAAC,QAAQ;QACb,MAAM,UAAU,aAAa,OAAO,EAAE,cAAc,eAAe,aAAa;QAChF,IAAI,UAAU,SAAS;YACrB,MAAM,YAAY,OAAO,YAAY;YACrC,IAAI;gBACF,OAAO,SAAS,CAAC,oBAAoB,CAAC,SAAS;YACjD,EAAE,OAAO,GAAG;gBACV,OAAO,OAAO,CAAC,SAAS;YAC1B;YACA,IAAI,WAAW,OAAO,YAAY,CAAC;QACrC;IACF,GAAG;QAAC;KAAM;IAEV,qBACE,yPAAC;kBACC,cAAA,yPAAC;YAAI,KAAK;;;;;;;;;;;AAGhB"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ILT/projobs/src/components/postjob/PostJobForm.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef } from \"react\";\r\nimport QuillEditor from '@/components/editor/QuillEditor';\r\n\r\n// lightweight id generator to avoid adding a runtime dependency\r\nconst genId = () => `${Date.now().toString(36)}-${Math.random().toString(36).slice(2,9)}`;\r\n\r\nexport default function PostJobForm() {\r\n  const [tab, setTab] = useState<\"details\" | \"questions\">(\"details\");\r\n  const [description, setDescription] = useState<string>(\"\");\r\n  const [requirements, setRequirements] = useState<string>(\"\");\r\n  const [minimumQualifications, setMinimumQualifications] = useState<string>(\"\");\r\n  const [benefits, setBenefits] = useState<string>(\"\");\r\n  const [scoringCriteria, setScoringCriteria] = useState<string>(\"\");\r\n  \r\n  // Questions tab state\r\n  const [uploadedFileName, setUploadedFileName] = useState<string | null>(null);\r\n  const [parsedQuestions, setParsedQuestions] = useState<Array<any>>([]);\r\n  const [defaultCategory, setDefaultCategory] = useState<'agency' | 'job'>('job');\r\n  const [previewAsApplicant, setPreviewAsApplicant] = useState<boolean>(false);\r\n  const [editingQuestionId, setEditingQuestionId] = useState<string | null>(null);\r\n  const fileInputRef = useRef<HTMLInputElement | null>(null);\r\n  const editingInputRef = useRef<HTMLInputElement | null>(null);\r\n  const inputRefs = React.useRef<Record<string, HTMLInputElement | null>>({});\r\n  const [includeQuestions, setIncludeQuestions] = useState<boolean>(true);\r\n  // kept for compatibility with older templates that toggled a client-side preview\r\n  const [showUploadedPreview, setShowUploadedPreview] = useState<boolean>(false);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState<boolean>(false);\r\n\r\n  // Drag-and-drop handlers\r\n  const handlePaletteDragStart = (e: React.DragEvent, type: string, label: string) => {\r\n    const payload = { source: 'palette', type, label };\r\n    e.dataTransfer.setData('application/json', JSON.stringify(payload));\r\n    e.dataTransfer.effectAllowed = 'copy';\r\n  };\r\n\r\n  const handleQuestionDragStart = (e: React.DragEvent, id: string) => {\r\n    const payload = { source: 'question', id };\r\n    e.dataTransfer.setData('application/json', JSON.stringify(payload));\r\n    e.dataTransfer.effectAllowed = 'move';\r\n  };\r\n\r\n  const handleAllowDrop = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'copy';\r\n  };\r\n\r\n  const insertIntoCategory = (items: any[], category: 'agency' | 'job', newItem: any, atIndex?: number) => {\r\n    // Find insertion index in the global items array so that items of same category remain grouped\r\n    const all = [...items];\r\n    // If atIndex is provided (global index), insert there\r\n    if (typeof atIndex === 'number') {\r\n      all.splice(atIndex, 0, newItem);\r\n      return all;\r\n    }\r\n    // Otherwise append after last item of that category\r\n    let lastIndex = -1;\r\n    for (let i = 0; i < all.length; i++) if (all[i].category === category) lastIndex = i;\r\n    if (lastIndex === -1) {\r\n      // find first index of other category to insert before, or push\r\n      const firstOther = all.findIndex(a => a.category !== category);\r\n      if (firstOther === -1) { all.push(newItem); return all; }\r\n      all.splice(firstOther, 0, newItem); return all;\r\n    }\r\n    all.splice(lastIndex + 1, 0, newItem);\r\n    return all;\r\n  };\r\n\r\n  const addQuestion = (q: any) => {\r\n    setParsedQuestions((s) => {\r\n      const next = [...s, q];\r\n      return next;\r\n    });\r\n    // focus/edit after render\r\n    setTimeout(() => setEditingQuestionId(q.id), 0);\r\n  };\r\n\r\n  const handleDropOnCategory = (e: React.DragEvent, category: 'agency' | 'job') => {\r\n    e.preventDefault();\r\n    try {\r\n      const raw = e.dataTransfer.getData('application/json');\r\n      if (!raw) return;\r\n      const data = JSON.parse(raw);\r\n      if (data.source === 'palette') {\r\n        const q = { id: genId(), type: data.type, label: data.label, category };\r\n        setParsedQuestions((s) => insertIntoCategory(s, category, q));\r\n      } else if (data.source === 'question') {\r\n        // change category of existing question and move it to end of target category\r\n        setParsedQuestions((s) => {\r\n          const item = s.find(x => x.id === data.id);\r\n          if (!item) return s;\r\n          const others = s.filter(x => x.id !== data.id);\r\n          const moved = { ...item, category };\r\n          return insertIntoCategory(others, category, moved);\r\n        });\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  const handleDropOnQuestion = (e: React.DragEvent, targetId: string) => {\r\n    e.preventDefault();\r\n    try {\r\n      const raw = e.dataTransfer.getData('application/json');\r\n      if (!raw) return;\r\n      const data = JSON.parse(raw);\r\n      if (data.source === 'question') {\r\n        setParsedQuestions((s) => {\r\n          const all = [...s];\r\n          const from = all.findIndex(x => x.id === data.id);\r\n          const to = all.findIndex(x => x.id === targetId);\r\n          if (from === -1 || to === -1 || from === to) return s;\r\n          const [item] = all.splice(from, 1);\r\n          all.splice(to, 0, item);\r\n          return all;\r\n        });\r\n      } else if (data.source === 'palette') {\r\n        // add new item before target\r\n        setParsedQuestions((s) => {\r\n          const all = [...s];\r\n          const to = all.findIndex(x => x.id === targetId);\r\n          const q = { id: genId(), type: data.type, label: data.label, category: (all[to]?.category ?? defaultCategory) };\r\n          all.splice(to, 0, q);\r\n          return all;\r\n        });\r\n      }\r\n    } catch (err) {\r\n      // ignore\r\n    }\r\n  };\r\n\r\n  // Keyboard helpers for question cards\r\n  const moveQuestion = (id: string, direction: 'up' | 'down') => {\r\n    setParsedQuestions((s) => {\r\n      const all = [...s];\r\n      const idx = all.findIndex(x => x.id === id);\r\n      if (idx === -1) return s;\r\n      const swapWith = direction === 'up' ? idx - 1 : idx + 1;\r\n      if (swapWith < 0 || swapWith >= all.length) return s;\r\n      const tmp = all[swapWith]; all[swapWith] = all[idx]; all[idx] = tmp; return all;\r\n    });\r\n  };\r\n\r\n  // helpers for common question operations (kept out of JSX to simplify parsing)\r\n  const deleteQuestion = (id: string) => setParsedQuestions((s) => s.filter(item => item.id !== id));\r\n  const changeQuestionCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => s.map(item => item.id === id ? {...item, category } : item));\r\n  const moveQuestionUpInCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => {\r\n    const all = [...s];\r\n    const pos = all.findIndex(x => x.id === id);\r\n    if (pos <= 0) return all;\r\n    let prevPos = -1;\r\n    for (let i = pos - 1; i >= 0; i--) if (all[i].category === category) { prevPos = i; break; }\r\n    if (prevPos === -1) return all;\r\n    const tmp = all[prevPos]; all[prevPos] = all[pos]; all[pos] = tmp; return all;\r\n  });\r\n  const moveQuestionDownInCategory = (id: string, category: 'agency'|'job') => setParsedQuestions((s) => {\r\n    const all = [...s];\r\n    const pos = all.findIndex(x => x.id === id);\r\n    if (pos === -1) return all;\r\n    let nextPos = -1;\r\n    for (let i = pos + 1; i < all.length; i++) if (all[i].category === category) { nextPos = i; break; }\r\n    if (nextPos === -1) return all;\r\n    const tmp = all[nextPos]; all[nextPos] = all[pos]; all[pos] = tmp; return all;\r\n  });\r\n\r\n  // Option editing helpers\r\n  const updateOption = (id: string, index: number, value: string) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    opts[index] = value;\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const addOption = (id: string, value = 'New option') => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options, value] : [value];\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const removeOption = (id: string, index: number) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    opts.splice(index, 1);\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  const moveOption = (id: string, from: number, to: number) => setParsedQuestions((s) => s.map(item => {\r\n    if (item.id !== id) return item;\r\n    const opts = Array.isArray(item.options) ? [...item.options] : [];\r\n    if (from < 0 || from >= opts.length || to < 0 || to >= opts.length) return item;\r\n    const [opt] = opts.splice(from, 1);\r\n    opts.splice(to, 0, opt);\r\n    return { ...item, options: opts };\r\n  }));\r\n\r\n  // Format phone as (XXX) XXX-XXXX while typing\r\n  const formatPhone = (input: string) => {\r\n    const digits = String(input || '').replace(/\\D/g, '').slice(0, 10);\r\n    if (digits.length === 0) return '';\r\n    if (digits.length <= 3) return `(${digits}`;\r\n    if (digits.length <= 6) return `(${digits.slice(0,3)}) ${digits.slice(3)}`;\r\n    return `(${digits.slice(0,3)}) ${digits.slice(3,6)}-${digits.slice(6)}`;\r\n  };\r\n\r\n  const isValidPhone = (s?: string) => {\r\n    if (!s) return false;\r\n    const digits = String(s).replace(/\\D/g, '');\r\n    return digits.length === 10;\r\n  };\r\n\r\n  const isValidEmail = (s?: string) => {\r\n    if (!s) return false;\r\n    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return re.test(String(s));\r\n  };\r\n\r\n  // Normalize email while typing: trim, lowercase, remove spaces, ensure single @\r\n  const formatEmail = (input: string) => {\r\n    let s = String(input || '').trim().toLowerCase();\r\n    // remove internal whitespace\r\n    s = s.replace(/\\s+/g, '');\r\n    // keep only the first @ if multiple\r\n    const at = s.indexOf('@');\r\n    if (at !== -1) {\r\n      s = s.slice(0, at + 1) + s.slice(at + 1).replace(/@/g, '');\r\n    }\r\n    // clamp length to a reasonable limit\r\n    return s.slice(0, 254);\r\n  };\r\n\r\n  const renderQuestionCard = (q: any) => (\r\n    <div key={q.id} tabIndex={0} onKeyDown={(e) => handleQuestionKey(e, q)} draggable onDragStart={(e) => handleQuestionDragStart(e, q.id)} onDragOver={(e) => e.preventDefault()} onDrop={(e) => handleDropOnQuestion(e, q.id)} className=\"border rounded p-3 bg-gray-50\">\r\n      <div className=\"w-full flex items-center justify-between gap-4\">\r\n        <div className=\"flex-1\" />\r\n\r\n        <div className=\"flex-shrink-0\">\r\n          <select value={q.category} onChange={(e) => changeQuestionCategory(q.id, e.target.value as 'agency'|'job')} className=\"rounded border px-2 py-1 text-sm\">\r\n            <option value=\"agency\">Agency-Wide</option>\r\n            <option value=\"job\">Job-Specific</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"flex-shrink-0 flex items-center gap-2\">\r\n          <label className=\"flex items-center text-sm gap-2\">\r\n            <input type=\"checkbox\" checked={!!q.required} onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? {...item, required: e.target.checked } : item))} />\r\n            <span>Required</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-3 w-full\">\r\n        {editingQuestionId === q.id ? (\r\n          <input\r\n            ref={(el) => { editingInputRef.current = el; }}\r\n            autoFocus\r\n            value={q.label}\r\n            onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, label: e.target.value } : item))}\r\n            onBlur={() => setEditingQuestionId(null)}\r\n            className=\"text-sm font-medium w-full rounded border px-2 py-1\"\r\n          />\r\n        ) : (\r\n          <div className=\"text-sm font-medium\" onDoubleClick={() => setEditingQuestionId(q.id)}>{q.label}</div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"text-xs text-gray-500 mt-2\">Type: {q.type}</div>\r\n      {/* Inline options editor for choice-like controls */}\r\n      {(['radio','checkbox','dropdown'] as string[]).includes(q.type) && (\r\n        <div className=\"mt-3\">\r\n          {(q.options||[]).map((opt: string, i: number) => (\r\n            <div key={i} className=\"flex items-center gap-2 mt-2\">\r\n              <input value={opt} onChange={(e) => updateOption(q.id, i, e.target.value)} className=\"flex-1 rounded border px-2 py-1 text-sm\" />\r\n              <button onClick={() => moveOption(q.id, i, Math.max(0, i-1))} className=\"px-2 py-1 text-xs bg-gray-100 rounded\">↑</button>\r\n              <button onClick={() => moveOption(q.id, i, Math.min((q.options||[]).length-1, i+1))} className=\"px-2 py-1 text-xs bg-gray-100 rounded\">↓</button>\r\n              <button onClick={() => removeOption(q.id, i)} className=\"px-2 py-1 text-xs text-red-600\">Delete</button>\r\n            </div>\r\n          ))}\r\n          <div className=\"mt-2\">\r\n            <button onClick={() => addOption(q.id)} className=\"px-3 py-1 text-sm bg-white border rounded\">Add option</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"flex justify-end items-center gap-2 mt-3\">\r\n        <button onClick={() => setEditingQuestionId(q.id)} className=\"text-sm text-gray-700\">Edit</button>\r\n        <button onClick={() => moveQuestionUpInCategory(q.id, q.category)} className=\"text-sm text-gray-600\">Up</button>\r\n        <button onClick={() => moveQuestionDownInCategory(q.id, q.category)} className=\"text-sm text-gray-600\">Down</button>\r\n        <button onClick={() => deleteQuestion(q.id)} className=\"text-sm text-red-600\">Delete</button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // focus the inline input when editingQuestionId changes\r\n  React.useEffect(() => {\r\n    if (editingQuestionId && editingInputRef.current) {\r\n      try { editingInputRef.current.focus(); editingInputRef.current.select(); } catch (e) {}\r\n    }\r\n  }, [editingQuestionId]);\r\n\r\n  const renderPreviewForQuestion = (q: any, idx: number) => {\r\n    const requiredMark = q.required ? <span className=\"text-red-600 ml-2\">*</span> : null;\r\n    switch (q.type) {\r\n      case 'text':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <input className=\"mt-2 w-full rounded border p-2\" placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n      case 'textarea':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <textarea className=\"mt-2 w-full rounded border p-2\" rows={4} placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n      case 'radio':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2 space-y-1\">\r\n              {(q.options||[]).map((opt: string, i: number) => (\r\n                <label key={i} className=\"flex items-center gap-2 text-sm\"><input type=\"radio\" name={`q_${q.id}`} />{opt}</label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'checkbox':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2 space-y-1\">\r\n              {(q.options||[]).map((opt: string, i: number) => (\r\n                <label key={i} className=\"flex items-center gap-2 text-sm\"><input type=\"checkbox\" />{opt}</label>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'dropdown':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <select className=\"mt-2 w-full rounded border p-2\">\r\n              <option>Please select one</option>\r\n              {(q.options||[]).map((opt: string, i: number) => (<option key={i}>{opt}</option>))}\r\n            </select>\r\n          </div>\r\n        );\r\n      case 'date':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div className=\"mt-2\">\r\n              <input\r\n                type=\"date\"\r\n                value={q.value ? String(q.value).slice(0,10) : ''}\r\n                onChange={(e) => setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: e.target.value ? new Date(e.target.value).toISOString() : null } : item))}\r\n                onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }}\r\n                className=\"mt-2 w-full rounded border p-2\"\r\n              />\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'phone':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div>\r\n              <input\r\n                ref={(el) => { inputRefs.current[q.id] = el; }}\r\n                type=\"tel\"\r\n                className={`mt-2 w-full rounded border p-2 ${q.value && !isValidPhone(q.value) ? 'border-red-500' : ''}`}\r\n                placeholder=\"Phone number\"\r\n                value={q.value || ''}\r\n                onChange={(e) => {\r\n                  const formatted = formatPhone(e.target.value);\r\n                  setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: formatted } : item));\r\n                  // move caret to end after formatting\r\n                  setTimeout(() => {\r\n                    const el = inputRefs.current[q.id];\r\n                    if (el) {\r\n                      const pos = (formatted || '').length;\r\n                      try { el.setSelectionRange(pos, pos); } catch (err) {}\r\n                    }\r\n                  }, 0);\r\n                }}\r\n              />\r\n              {q.value && !isValidPhone(q.value) && (\r\n                <div className=\"text-xs text-red-600 mt-1\">Enter a 10-digit phone number</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      case 'email':\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <div>\r\n              <input\r\n                ref={(el) => { inputRefs.current[q.id] = el; }}\r\n                type=\"email\"\r\n                className={`mt-2 w-full rounded border p-2 ${q.value && !isValidEmail(q.value) ? 'border-red-500' : ''}`}\r\n                placeholder=\"Email address\"\r\n                value={q.value || ''}\r\n                onChange={(e) => {\r\n                  const formatted = formatEmail(e.target.value);\r\n                  setParsedQuestions((s) => s.map(item => item.id === q.id ? { ...item, value: formatted } : item));\r\n                  setTimeout(() => {\r\n                    const el = inputRefs.current[q.id];\r\n                    if (el) {\r\n                      const pos = (formatted || '').length;\r\n                      try { el.setSelectionRange(pos, pos); } catch (err) {}\r\n                    }\r\n                  }, 0);\r\n                }}\r\n              />\r\n              {q.value && !isValidEmail(q.value) && (\r\n                <div className=\"text-xs text-red-600 mt-1\">Enter a valid email address</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      default:\r\n        return (\r\n          <div key={q.id} className=\"py-3\">\r\n            <div className=\"text-sm font-medium\">{String(idx).padStart(2,'0')}. {q.label}{requiredMark}</div>\r\n            <input className=\"mt-2 w-full rounded border p-2\" placeholder=\"Answer\" />\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  const handleQuestionKey = (e: React.KeyboardEvent, q: any) => {\r\n    if (e.key === 'Delete') {\r\n      setParsedQuestions((s) => s.filter(item => item.id !== q.id));\r\n      return;\r\n    }\r\n    if (e.key === 'Enter') {\r\n      // quick inline edit via prompt (keeps implementation simple)\r\n      const newLabel = prompt('Edit question label', q.label);\r\n      if (newLabel != null) {\r\n        setParsedQuestions((s) => s.map(item => item.id === q.id ? {...item, label: newLabel } : item));\r\n      }\r\n      return;\r\n    }\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowUp') {\r\n      moveQuestion(q.id, 'up');\r\n      return;\r\n    }\r\n    if ((e.ctrlKey || e.metaKey) && e.key === 'ArrowDown') {\r\n      moveQuestion(q.id, 'down');\r\n      return;\r\n    }\r\n  };\r\n\r\n  const handlePublish = async () => {\r\n    const jobPayload = {\r\n      title: 'New Job',\r\n      description,\r\n      requirements,\r\n      minimumQualifications,\r\n      benefits,\r\n      scoringCriteria,\r\n      includeQuestions,\r\n    };\r\n    try {\r\n      const res = await fetch('/api/post-job', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(jobPayload),\r\n      });\r\n      const json = await res.json();\r\n      if (!res.ok) {\r\n        alert('Failed to create job');\r\n        return;\r\n      }\r\n      if (includeQuestions && parsedQuestions.length > 0) {\r\n        await handlePublishClientSide(parsedQuestions);\r\n      }\r\n      alert('Job published');\r\n    } catch (err) {\r\n      console.error('Publish error', err);\r\n      alert('Publish failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 bg-white rounded-xl shadow border border-gray-200 mt-6\">\r\n      <h2 className=\"text-lg font-semibold mb-1\">Create New Job Posting</h2>\r\n      <p className=\"text-sm text-gray-500 mb-4\">Fill in the details for your new job posting</p>\r\n\r\n      <div className=\"flex items-center border-b mb-5\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setTab(\"details\")}\r\n          className={`px-4 py-2 -mb-px font-semibold ${tab === \"details\" ? \"border-b-2 border-blue-600 text-blue-700\" : \"text-gray-400\"}`}\r\n        >\r\n          JOB DETAILS\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setTab(\"questions\")}\r\n          className={`px-4 py-2 -mb-px font-semibold ${tab === \"questions\" ? \"border-b-2 border-blue-600 text-blue-700\" : \"text-gray-400\"}`}\r\n        >\r\n          QUESTIONS\r\n        </button>\r\n      </div>\r\n\r\n      {tab === \"details\" ? (\r\n        <div className=\"space-y-6\">\r\n          {/* Basic Information */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Basic Information</h3>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Department</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select department</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New Department...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job / Exam Number *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., JOB2026-001\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Title *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., Web Developer...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Opening Date *</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Closing Date</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-gray-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Review Date</label>\r\n                <div className=\"mt-1\">\r\n                  <input type=\"date\" onFocus={(e) => { const t = e.target as HTMLInputElement; try { (t as any).showPicker?.(); } catch {} }} className=\"mt-1 block w-full rounded border border-gray-300 px-3 py-2\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center mt-3\">\r\n              <input id=\"continuous\" type=\"checkbox\" className=\"h-4 w-4 text-blue-600 border-gray-300 rounded\" />\r\n              <label htmlFor=\"continuous\" className=\"ml-2 text-sm\">Continuous</label>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Location *</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"City\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">State</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>State</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">ZIP</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"5-digit ZIP Code\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Type *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select type</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Work Site</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select work site</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Level</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select level</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Classification *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select Classification</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job classification...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Function *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select function</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job function...\" />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Job Category *</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select Category</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-xs text-gray-500\">If not in the list, please specify:</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., New job category...\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Compensation */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Compensation</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Compensation Type</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Annual Salary</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Minimum Pay</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., 50,000.00\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Maximum Pay</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., 140,000.00\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Job Details */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Job Details</h3>\r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Job Description *</label>\r\n                <QuillEditor value={description} onChange={setDescription} placeholder=\"Please describe the role, responsibilities, and what a typical day looks like...\" />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Requirements *</label>\r\n                <QuillEditor value={requirements} onChange={setRequirements} placeholder=\"Please list the required qualifications, skills, and experience...\" />\r\n              </div>\r\n\r\n              \r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Benefits *</label>\r\n                <QuillEditor value={benefits} onChange={setBenefits} placeholder=\"Please describe the benefits and perks offered...\" />\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Minimum Qualifications (moved below Benefits) */}\r\n          <section>\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1\">Minimum Qualifications (MQ)</label>\r\n              <textarea\r\n                rows={3}\r\n                value={minimumQualifications}\r\n                onChange={(e) => setMinimumQualifications(e.target.value)}\r\n                className=\"w-full rounded border border-gray-300 p-3 text-sm\"\r\n                placeholder=\"e.g., Bachelor's degree in relevant field OR 5 years equivalent experience; Valid driver's license required; Must pass background check...\"\r\n              />\r\n            </div>\r\n          </section>\r\n\r\n          {/* Civil Service & Compliance */}\r\n          <section>\r\n            <h3 className=\"font-semibold text-base mb-3\">Civil Service & Compliance</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Bargaining Unit</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select professional unit</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Pay Grade</label>\r\n                <input className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2\" placeholder=\"e.g., Grade 12\" />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium\">Education</label>\r\n                <select className=\"mt-1 block w-full rounded border border-red-300 px-3 py-2 bg-white\">\r\n                  <option>Select education</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-wrap gap-4 mt-4\">\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Civil Service Exam</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Veteran Preference</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> FLSA</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Driver's license</label>\r\n              <label className=\"flex items-center text-sm\"><input type=\"checkbox\" className=\"mr-2 h-4 w-4\" /> Reference</label>\r\n            </div>\r\n\r\n            <div className=\"mt-4\">\r\n              <label className=\"block text-sm font-medium mb-1\">Scoring Criteria</label>\r\n              <textarea\r\n                rows={3}\r\n                value={scoringCriteria}\r\n                onChange={(e) => setScoringCriteria(e.target.value)}\r\n                className=\"w-full rounded border border-gray-300 p-3 text-sm\"\r\n                placeholder=\"Describe the scoring criteria and weights (e.g., Education 30%, Experience 40%, Skills 30%)...\"\r\n              />\r\n            </div>\r\n          </section>\r\n\r\n          <div className=\"flex justify-center\">\r\n            <button onClick={handlePublish} className=\"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm\">\r\n              Publish Job\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <label className=\"flex items-center gap-3\">\r\n              <input type=\"checkbox\" checked={includeQuestions} onChange={(e) => setIncludeQuestions(e.target.checked)} className=\"h-4 w-4\" />\r\n              <span className=\"font-medium\">Include screening questions</span>\r\n              <span className=\"text-sm text-gray-500 ml-2\">(Optional — only add questions if required for this job)</span>\r\n            </label>\r\n          </div>\r\n          \r\n          \r\n          {!includeQuestions ? (\r\n            <div className=\"border rounded p-4 bg-gray-50 text-center\">\r\n              <p className=\"text-sm text-gray-600 mb-3\">Screening questions are disabled for this job.</p>\r\n              <button type=\"button\" onClick={() => setIncludeQuestions(true)} className=\"px-3 py-2 bg-blue-600 text-white rounded text-sm\">Enable Screening Questions</button>\r\n            </div>\r\n          ) : null}\r\n          <div className=\"border rounded-md p-4 flex items-center justify-between bg-gray-50\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <svg width=\"36\" height=\"36\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"text-gray-400\">\r\n                <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                <path d=\"M14 2v6h6\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n              </svg>\r\n              <div>\r\n                <p className=\"text-sm text-gray-700\">Upload PDF or Word document with pre-written questions here...</p>\r\n                <p className=\"text-xs text-gray-500\">Supported: .pdf, .doc, .docx</p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <input ref={fileInputRef} type=\"file\" className=\"hidden\" accept=\".pdf,.doc,.docx,.txt\" onChange={async (e) => {\r\n                const file = e.target.files?.[0];\r\n                if (!file) return;\r\n                // warn before overwriting existing parsed content\r\n                if (uploadedFileName || parsedQuestions.length > 0) {\r\n                  const ok = confirm('Uploading a new file will overwrite any existing questions. Continue?');\r\n                  if (!ok) {\r\n                    e.currentTarget.value = '';\r\n                    return;\r\n                  }\r\n                }\r\n                setUploadedFileName(file.name);\r\n                // If this is a plain text file, parse client-side. Otherwise send to server parser and map results into questions/options.\r\n                const isText = file.type.startsWith('text/') || file.name.toLowerCase().endsWith('.txt');\r\n                if (isText) {\r\n                  try {\r\n                    const text = await file.text();\r\n                    const lines = text.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\r\n                    if (lines.length > 0) {\r\n                      const q = lines.slice(0, 50).map((line) => ({ id: genId(), type: 'text', label: line, category: defaultCategory, required: true }));\r\n                      setParsedQuestions(q);\r\n                      setTimeout(() => { if (q[0]?.id) setEditingQuestionId(q[0].id); }, 0);\r\n                    } else {\r\n                      const single = { id: genId(), type: 'text', label: file.name, category: defaultCategory, required: true };\r\n                      setParsedQuestions([single]);\r\n                      setTimeout(() => setEditingQuestionId(single.id), 0);\r\n                    }\r\n                  } catch (err) {\r\n                    const fallback = { id: genId(), type: 'text', label: `Uploaded: ${file.name} (parsing requires server)`, category: defaultCategory };\r\n                    setParsedQuestions([fallback]);\r\n                    setTimeout(() => setEditingQuestionId(fallback.id), 0);\r\n                  }\r\n                } else {\r\n                  // upload file first to create job_document_version, then call parse endpoint with versionId\r\n                  try {\r\n                    const arrayBuf = await file.arrayBuffer();\r\n                    // prepare base64 for server upload\r\n                    const bytes = new Uint8Array(arrayBuf);\r\n                    let binary = '';\r\n                    const chunk = 0x8000;\r\n                    for (let i = 0; i < bytes.length; i += chunk) {\r\n                      const slice = bytes.subarray(i, i + chunk);\r\n                      binary += String.fromCharCode.apply(null, Array.from(slice));\r\n                    }\r\n                    const b64 = btoa(binary);\r\n\r\n                    // call upload endpoint to create job_document + version\r\n                    let versionId: string | undefined = undefined;\r\n                    try {\r\n                      const up = await fetch('/api/post-job/upload-doc', {\r\n                        method: 'POST',\r\n                        headers: { 'Content-Type': 'application/json' },\r\n                        body: JSON.stringify({ name: file.name, mime: file.type, data: b64 })\r\n                      });\r\n                      const upJson = await up.json();\r\n                      if (upJson && upJson.ok && upJson.versionId) versionId = upJson.versionId;\r\n                    } catch (ux) {\r\n                      // ignore upload failure and continue to parse without versionId\r\n                    }\r\n\r\n                    // parse using server, passing versionId if available\r\n                    const res = await fetch('/api/post-job/parse-doc', {\r\n                      method: 'POST',\r\n                      headers: { 'Content-Type': 'application/json' },\r\n                      body: JSON.stringify({ name: file.name, mime: file.type, data: b64, versionId })\r\n                    });\r\n                    const json = await res.json();\r\n                    // save any returned html/text for preview\r\n                    // server may return HTML/text useful for parsing; we don't store client preview anymore\r\n\r\n                    // prefer structured parsed array from new parser, fallback to text/html parsing\r\n                    let parsed: any[] = [];\r\n                    if (json && json.ok && Array.isArray(json.parsed) && json.parsed.length > 0) {\r\n                      parsed = json.parsed.map((p: any) => ({ ...p, category: p.category ?? defaultCategory }));\r\n                    } else {\r\n                      const text = (json && json.ok && json.text) ? String(json.text) : (json && json.html ? String(json.html).replace(/<[^>]+>/g, '\\n') : '');\r\n                      const blocks = text.split(/\\n{2,}/).map(b => b.trim()).filter(Boolean).slice(0, 200);\r\n                      const stripOpt = (s: string) => s.replace(/^[\\-\\u2022\\*\\s]*/, '').replace(/^[0-9]+[\\).]\\s*/, '').replace(/^[a-zA-Z][\\).]\\s*/, '').trim();\r\n                      for (const blk of blocks) {\r\n                        const lines = blk.split(/\\r?\\n/).map(l => l.trim()).filter(Boolean);\r\n                        if (lines.length === 0) continue;\r\n                        if (lines.length > 1) {\r\n                          const opts = lines.slice(1).filter(l => /^([\\-\\u2022\\*]|[0-9]+[\\).]|[a-zA-Z][\\).])/.test(l) || /^\\s*[-•*]/.test(l));\r\n                          if (opts.length >= 1) {\r\n                            const options = lines.slice(1).map(stripOpt).filter(Boolean);\r\n                            parsed.push({ id: genId(), type: 'radio', label: lines[0], options, category: defaultCategory, required: true });\r\n                            continue;\r\n                          }\r\n                        }\r\n                        parsed.push({ id: genId(), type: 'text', label: lines[0], category: defaultCategory, required: true });\r\n                      }\r\n                      if (parsed.length === 0) parsed.push({ id: genId(), type: 'text', label: `Uploaded: ${file.name} (no parseable content)`, category: defaultCategory, required: true });\r\n                    }\r\n\r\n                    setParsedQuestions(parsed);\r\n                    if (parsed.length > 0) setTimeout(() => setEditingQuestionId(parsed[0].id), 0);\r\n                  } catch (err) {\r\n                    const fallback2 = { id: genId(), type: 'text', label: `Uploaded: ${file.name} (parsing requires server)`, category: defaultCategory };\r\n                    setParsedQuestions([fallback2]);\r\n                    setTimeout(() => setEditingQuestionId(fallback2.id), 0);\r\n                  }\r\n                }\r\n              }} />\r\n              <button type=\"button\" onClick={() => fileInputRef.current?.click()} className=\"inline-flex items-center gap-2 px-3 py-2 bg-white border rounded text-sm hover:bg-gray-100\">\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className=\"text-gray-600\">\r\n                  <path d=\"M12 5v14\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                  <path d=\"M19 12l-7-7-7 7\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n                Upload Questions\r\n              </button>\r\n              {uploadedFileName && (\r\n                <div>\r\n                  {!showDeleteConfirm ? (\r\n                    <button type=\"button\" onClick={() => setShowDeleteConfirm(true)} className=\"inline-flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded text-sm text-red-600 hover:bg-red-100\">\r\n                      Delete Upload\r\n                    </button>\r\n                  ) : (\r\n                    <div className=\"inline-flex items-center gap-2\">\r\n                      <span className=\"text-sm text-gray-700 mr-2\">Confirm delete?</span>\r\n                      <button type=\"button\" onClick={() => {\r\n                        setUploadedFileName(null);\r\n                        setParsedQuestions([]);\r\n                        if (fileInputRef.current) fileInputRef.current.value = '';\r\n                        setShowDeleteConfirm(false);\r\n                      }} className=\"px-3 py-1 bg-red-600 text-white rounded text-sm\">Delete</button>\r\n                      <button type=\"button\" onClick={() => setShowDeleteConfirm(false)} className=\"px-3 py-1 bg-white border rounded text-sm\">Cancel</button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n              <label className=\"text-sm text-gray-600\">Default category for new questions:</label>\r\n              <select value={defaultCategory} onChange={(e) => setDefaultCategory(e.target.value as 'agency'|'job')} className=\"rounded border px-2 py-1 text-sm\">\r\n                <option value=\"agency\">Agency-Wide Questions</option>\r\n                <option value=\"job\">Job-Specific Supplemental Questions</option>\r\n              </select>\r\n              <div className=\"ml-4\">\r\n                  <button\r\n                  type=\"button\"\r\n                  onClick={() => setPreviewAsApplicant((s) => !s)}\r\n                  aria-pressed={previewAsApplicant}\r\n                      className={`inline-flex items-center gap-2 px-3 py-1 text-sm rounded focus:outline-none focus:ring-2 ${previewAsApplicant ? 'bg-blue-600 text-white border border-blue-700 hover:bg-blue-700' : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-100'}`}\r\n                >\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" className={`${previewAsApplicant ? 'text-white' : 'text-gray-600'}`}>\r\n                    <path d=\"M2 12s4-7 10-7 10 7 10 7-4 7-10 7S2 12 2 12z\" stroke=\"currentColor\" strokeWidth=\"1.25\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                    <circle cx=\"12\" cy=\"12\" r=\"3\" stroke=\"currentColor\" strokeWidth=\"1.25\" />\r\n                  </svg>\r\n                  <span>Preview as applicant</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n          <div>\r\n            <h3 className=\"font-semibold text-base mb-2\">Screening Questions</h3>\r\n            <p className=\"text-sm text-gray-500 mb-4\">Build custom screening questions for applicants by clicking form elements.</p>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div className=\"col-span-1\">\r\n                <div className=\"bg-white border rounded p-4\">\r\n                  <h4 className=\"text-sm font-medium mb-3\">Form Elements</h4>\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'text', 'Short answer')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'text', label: 'Short answer', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Text Input</div>\r\n                      <div className=\"text-xs text-gray-400\">Single line text</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'textarea', 'Long answer')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'textarea', label: 'Long answer', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Text Area</div>\r\n                      <div className=\"text-xs text-gray-400\">Multi-line text</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'checkbox', 'Choose options')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'checkbox', label: 'Choose options', options: ['Option 1','Option 2'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Checkbox</div>\r\n                      <div className=\"text-xs text-gray-400\">Multiple choice</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'radio', 'Choose one')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'radio', label: 'Choose one', options: ['Option A','Option B'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Radio Buttons</div>\r\n                      <div className=\"text-xs text-gray-400\">Single choice</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'dropdown', 'Select')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'dropdown', label: 'Select', options: ['One','Two'], category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Dropdown</div>\r\n                      <div className=\"text-xs text-gray-400\">Select from list</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'date', 'Select date')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'date', label: 'Select date', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Date</div>\r\n                      <div className=\"text-xs text-gray-400\">Date picker</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'phone', 'Phone')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'phone', label: 'Phone', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Phone</div>\r\n                      <div className=\"text-xs text-gray-400\">Phone number</div>\r\n                    </button>\r\n                    <button draggable onDragStart={(e) => handlePaletteDragStart(e, 'email', 'Email')} type=\"button\" onClick={() => {\r\n                      const q = { id: genId(), type: 'email', label: 'Email', category: defaultCategory, required: true };\r\n                      addQuestion(q);\r\n                    }} className=\"text-left p-3 border rounded bg-white hover:shadow-sm\">\r\n                      <div className=\"text-sm font-medium\">Email</div>\r\n                      <div className=\"text-xs text-gray-400\">Email address</div>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <div className=\"min-h-[16rem] border-2 border-dashed rounded-lg p-4 bg-white space-y-4\">\r\n                  {/* Agency-Wide Questions */}\r\n                  <div onDragOver={handleAllowDrop} onDrop={(e) => handleDropOnCategory(e, 'agency')}>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className=\"text-sm font-medium\">Agency-Wide Questions</h4>\r\n                      <div className=\"text-xs text-gray-500\">{parsedQuestions.filter(q => q.category === 'agency').length} items</div>\r\n                    </div>\r\n                    {parsedQuestions.filter(q => q.category === 'agency').length === 0 ? (\r\n                      <div className=\"rounded p-4 bg-gray-50 text-center text-sm text-gray-400\">No agency-wide questions. Click an element to add.</div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                          {parsedQuestions.filter(q => q.category === 'agency').map(renderQuestionCard)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Job-Specific Questions */}\r\n                  <div onDragOver={handleAllowDrop} onDrop={(e) => handleDropOnCategory(e, 'job')}>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <h4 className=\"text-sm font-medium\">Job-Specific Supplemental Questions</h4>\r\n                      <div className=\"text-xs text-gray-500\">{parsedQuestions.filter(q => q.category === 'job').length} items</div>\r\n                    </div>\r\n                    {parsedQuestions.filter(q => q.category === 'job').length === 0 ? (\r\n                      <div className=\"rounded p-4 bg-gray-50 text-center text-sm text-gray-400\">No job-specific questions. Click an element to add.</div>\r\n                    ) : (\r\n                      <div className=\"space-y-3\">\r\n                        {parsedQuestions.filter(q => q.category === 'job').map(renderQuestionCard)}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {previewAsApplicant && (\r\n            <div className=\"mt-6\">\r\n              <h3 className=\"font-semibold text-base mb-3\">Preview — Applicant View</h3>\r\n                  <div className=\"border rounded p-4 bg-white\">\r\n                    {(() => {\r\n                      const agencyQs = parsedQuestions.filter((q) => q.category === 'agency');\r\n                      const jobQs = parsedQuestions.filter((q) => q.category === 'job');\r\n                      return (\r\n                        <>\r\n                          {agencyQs.length > 0 && (\r\n                            <div className=\"mb-4\">\r\n                              <h4 className=\"text-sm font-medium text-center\">Agency-Wide Questions</h4>\r\n                              <div className=\"mt-2\">\r\n                                {agencyQs.map((q, i) => renderPreviewForQuestion(q, i+1))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {jobQs.length > 0 && (\r\n                            <div>\r\n                              <h4 className=\"text-sm font-medium text-center\">Supplemental Questions</h4>\r\n                              <div className=\"mt-2\">\r\n                                {jobQs.map((q, i) => renderPreviewForQuestion(q, i+1))}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n\r\n                          {agencyQs.length === 0 && jobQs.length === 0 && (\r\n                            <div className=\"text-sm text-gray-400 text-center\">No screening questions to preview.</div>\r\n                          )}\r\n                        </>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n            </div>\r\n          )}\r\n\r\n          \r\n\r\n          <div className=\"border-t pt-6\">\r\n            <div className=\"flex justify-center\">\r\n              <button onClick={handlePublish} className=\"bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 text-sm\">\r\n                Publish Job\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nasync function handlePublishClientSide(questions: any[]) {\r\n  // slim wrapper to POST the questions to server batch endpoint\r\n  const res = await fetch('/api/jobs/questions/batch', {\r\n    method: 'POST',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify({ jobId: null, questions }),\r\n  });\r\n  return res.json();\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,gEAAgE;AAChE,MAAM,QAAQ,IAAM,GAAG,KAAK,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,KAAK,CAAC,GAAE,IAAI;AAE1E,SAAS;IACtB,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,4NAAQ,EAA0B;IACxD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,4NAAQ,EAAS;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,4NAAQ,EAAS;IACzD,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,4NAAQ,EAAS;IAC3E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,4NAAQ,EAAS;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,4NAAQ,EAAS;IAE/D,sBAAsB;IACtB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,4NAAQ,EAAgB;IACxE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,4NAAQ,EAAa,EAAE;IACrE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,4NAAQ,EAAmB;IACzE,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,4NAAQ,EAAU;IACtE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,4NAAQ,EAAgB;IAC1E,MAAM,eAAe,IAAA,0NAAM,EAA0B;IACrD,MAAM,kBAAkB,IAAA,0NAAM,EAA0B;IACxD,MAAM,YAAY,2NAAK,CAAC,MAAM,CAA0C,CAAC;IACzE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,4NAAQ,EAAU;IAClE,iFAAiF;IACjF,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,4NAAQ,EAAU;IACxE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,4NAAQ,EAAU;IAEpE,yBAAyB;IACzB,MAAM,yBAAyB,CAAC,GAAoB,MAAc;QAChE,MAAM,UAAU;YAAE,QAAQ;YAAW;YAAM;QAAM;QACjD,EAAE,YAAY,CAAC,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;QAC1D,EAAE,YAAY,CAAC,aAAa,GAAG;IACjC;IAEA,MAAM,0BAA0B,CAAC,GAAoB;QACnD,MAAM,UAAU;YAAE,QAAQ;YAAY;QAAG;QACzC,EAAE,YAAY,CAAC,OAAO,CAAC,oBAAoB,KAAK,SAAS,CAAC;QAC1D,EAAE,YAAY,CAAC,aAAa,GAAG;IACjC;IAEA,MAAM,kBAAkB,CAAC;QACvB,EAAE,cAAc;QAChB,EAAE,YAAY,CAAC,UAAU,GAAG;IAC9B;IAEA,MAAM,qBAAqB,CAAC,OAAc,UAA4B,SAAc;QAClF,+FAA+F;QAC/F,MAAM,MAAM;eAAI;SAAM;QACtB,sDAAsD;QACtD,IAAI,OAAO,YAAY,UAAU;YAC/B,IAAI,MAAM,CAAC,SAAS,GAAG;YACvB,OAAO;QACT;QACA,oDAAoD;QACpD,IAAI,YAAY,CAAC;QACjB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK,IAAI,GAAG,CAAC,EAAE,CAAC,QAAQ,KAAK,UAAU,YAAY;QACnF,IAAI,cAAc,CAAC,GAAG;YACpB,+DAA+D;YAC/D,MAAM,aAAa,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK;YACrD,IAAI,eAAe,CAAC,GAAG;gBAAE,IAAI,IAAI,CAAC;gBAAU,OAAO;YAAK;YACxD,IAAI,MAAM,CAAC,YAAY,GAAG;YAAU,OAAO;QAC7C;QACA,IAAI,MAAM,CAAC,YAAY,GAAG,GAAG;QAC7B,OAAO;IACT;IAEA,MAAM,cAAc,CAAC;QACnB,mBAAmB,CAAC;YAClB,MAAM,OAAO;mBAAI;gBAAG;aAAE;YACtB,OAAO;QACT;QACA,0BAA0B;QAC1B,WAAW,IAAM,qBAAqB,EAAE,EAAE,GAAG;IAC/C;IAEA,MAAM,uBAAuB,CAAC,GAAoB;QAChD,EAAE,cAAc;QAChB,IAAI;YACF,MAAM,MAAM,EAAE,YAAY,CAAC,OAAO,CAAC;YACnC,IAAI,CAAC,KAAK;YACV,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,IAAI,KAAK,MAAM,KAAK,WAAW;gBAC7B,MAAM,IAAI;oBAAE,IAAI;oBAAS,MAAM,KAAK,IAAI;oBAAE,OAAO,KAAK,KAAK;oBAAE;gBAAS;gBACtE,mBAAmB,CAAC,IAAM,mBAAmB,GAAG,UAAU;YAC5D,OAAO,IAAI,KAAK,MAAM,KAAK,YAAY;gBACrC,6EAA6E;gBAC7E,mBAAmB,CAAC;oBAClB,MAAM,OAAO,EAAE,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;oBACzC,IAAI,CAAC,MAAM,OAAO;oBAClB,MAAM,SAAS,EAAE,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;oBAC7C,MAAM,QAAQ;wBAAE,GAAG,IAAI;wBAAE;oBAAS;oBAClC,OAAO,mBAAmB,QAAQ,UAAU;gBAC9C;YACF;QACF,EAAE,OAAO,KAAK;QACZ,SAAS;QACX;IACF;IAEA,MAAM,uBAAuB,CAAC,GAAoB;QAChD,EAAE,cAAc;QAChB,IAAI;YACF,MAAM,MAAM,EAAE,YAAY,CAAC,OAAO,CAAC;YACnC,IAAI,CAAC,KAAK;YACV,MAAM,OAAO,KAAK,KAAK,CAAC;YACxB,IAAI,KAAK,MAAM,KAAK,YAAY;gBAC9B,mBAAmB,CAAC;oBAClB,MAAM,MAAM;2BAAI;qBAAE;oBAClB,MAAM,OAAO,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;oBAChD,MAAM,KAAK,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;oBACvC,IAAI,SAAS,CAAC,KAAK,OAAO,CAAC,KAAK,SAAS,IAAI,OAAO;oBACpD,MAAM,CAAC,KAAK,GAAG,IAAI,MAAM,CAAC,MAAM;oBAChC,IAAI,MAAM,CAAC,IAAI,GAAG;oBAClB,OAAO;gBACT;YACF,OAAO,IAAI,KAAK,MAAM,KAAK,WAAW;gBACpC,6BAA6B;gBAC7B,mBAAmB,CAAC;oBAClB,MAAM,MAAM;2BAAI;qBAAE;oBAClB,MAAM,KAAK,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;oBACvC,MAAM,IAAI;wBAAE,IAAI;wBAAS,MAAM,KAAK,IAAI;wBAAE,OAAO,KAAK,KAAK;wBAAE,UAAW,GAAG,CAAC,GAAG,EAAE,YAAY;oBAAiB;oBAC9G,IAAI,MAAM,CAAC,IAAI,GAAG;oBAClB,OAAO;gBACT;YACF;QACF,EAAE,OAAO,KAAK;QACZ,SAAS;QACX;IACF;IAEA,sCAAsC;IACtC,MAAM,eAAe,CAAC,IAAY;QAChC,mBAAmB,CAAC;YAClB,MAAM,MAAM;mBAAI;aAAE;YAClB,MAAM,MAAM,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACxC,IAAI,QAAQ,CAAC,GAAG,OAAO;YACvB,MAAM,WAAW,cAAc,OAAO,MAAM,IAAI,MAAM;YACtD,IAAI,WAAW,KAAK,YAAY,IAAI,MAAM,EAAE,OAAO;YACnD,MAAM,MAAM,GAAG,CAAC,SAAS;YAAE,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI;YAAE,GAAG,CAAC,IAAI,GAAG;YAAK,OAAO;QAC9E;IACF;IAEA,+EAA+E;IAC/E,MAAM,iBAAiB,CAAC,KAAe,mBAAmB,CAAC,IAAM,EAAE,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAC9F,MAAM,yBAAyB,CAAC,IAAY,WAA6B,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,KAAK;oBAAC,GAAG,IAAI;oBAAE;gBAAS,IAAI;IACzJ,MAAM,2BAA2B,CAAC,IAAY,WAA6B,mBAAmB,CAAC;YAC7F,MAAM,MAAM;mBAAI;aAAE;YAClB,MAAM,MAAM,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACxC,IAAI,OAAO,GAAG,OAAO;YACrB,IAAI,UAAU,CAAC;YACf,IAAK,IAAI,IAAI,MAAM,GAAG,KAAK,GAAG,IAAK,IAAI,GAAG,CAAC,EAAE,CAAC,QAAQ,KAAK,UAAU;gBAAE,UAAU;gBAAG;YAAO;YAC3F,IAAI,YAAY,CAAC,GAAG,OAAO;YAC3B,MAAM,MAAM,GAAG,CAAC,QAAQ;YAAE,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI;YAAE,GAAG,CAAC,IAAI,GAAG;YAAK,OAAO;QAC5E;IACA,MAAM,6BAA6B,CAAC,IAAY,WAA6B,mBAAmB,CAAC;YAC/F,MAAM,MAAM;mBAAI;aAAE;YAClB,MAAM,MAAM,IAAI,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YACxC,IAAI,QAAQ,CAAC,GAAG,OAAO;YACvB,IAAI,UAAU,CAAC;YACf,IAAK,IAAI,IAAI,MAAM,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK,IAAI,GAAG,CAAC,EAAE,CAAC,QAAQ,KAAK,UAAU;gBAAE,UAAU;gBAAG;YAAO;YACnG,IAAI,YAAY,CAAC,GAAG,OAAO;YAC3B,MAAM,MAAM,GAAG,CAAC,QAAQ;YAAE,GAAG,CAAC,QAAQ,GAAG,GAAG,CAAC,IAAI;YAAE,GAAG,CAAC,IAAI,GAAG;YAAK,OAAO;QAC5E;IAEA,yBAAyB;IACzB,MAAM,eAAe,CAAC,IAAY,OAAe,QAAkB,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA;gBACjG,IAAI,KAAK,EAAE,KAAK,IAAI,OAAO;gBAC3B,MAAM,OAAO,MAAM,OAAO,CAAC,KAAK,OAAO,IAAI;uBAAI,KAAK,OAAO;iBAAC,GAAG,EAAE;gBACjE,IAAI,CAAC,MAAM,GAAG;gBACd,OAAO;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAAK;YAClC;IAEA,MAAM,YAAY,CAAC,IAAY,QAAQ,YAAY,GAAK,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA;gBACtF,IAAI,KAAK,EAAE,KAAK,IAAI,OAAO;gBAC3B,MAAM,OAAO,MAAM,OAAO,CAAC,KAAK,OAAO,IAAI;uBAAI,KAAK,OAAO;oBAAE;iBAAM,GAAG;oBAAC;iBAAM;gBAC7E,OAAO;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAAK;YAClC;IAEA,MAAM,eAAe,CAAC,IAAY,QAAkB,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA;gBAClF,IAAI,KAAK,EAAE,KAAK,IAAI,OAAO;gBAC3B,MAAM,OAAO,MAAM,OAAO,CAAC,KAAK,OAAO,IAAI;uBAAI,KAAK,OAAO;iBAAC,GAAG,EAAE;gBACjE,KAAK,MAAM,CAAC,OAAO;gBACnB,OAAO;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAAK;YAClC;IAEA,MAAM,aAAa,CAAC,IAAY,MAAc,KAAe,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA;gBAC3F,IAAI,KAAK,EAAE,KAAK,IAAI,OAAO;gBAC3B,MAAM,OAAO,MAAM,OAAO,CAAC,KAAK,OAAO,IAAI;uBAAI,KAAK,OAAO;iBAAC,GAAG,EAAE;gBACjE,IAAI,OAAO,KAAK,QAAQ,KAAK,MAAM,IAAI,KAAK,KAAK,MAAM,KAAK,MAAM,EAAE,OAAO;gBAC3E,MAAM,CAAC,IAAI,GAAG,KAAK,MAAM,CAAC,MAAM;gBAChC,KAAK,MAAM,CAAC,IAAI,GAAG;gBACnB,OAAO;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAAK;YAClC;IAEA,8CAA8C;IAC9C,MAAM,cAAc,CAAC;QACnB,MAAM,SAAS,OAAO,SAAS,IAAI,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC,GAAG;QAC/D,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;QAChC,IAAI,OAAO,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,EAAE,QAAQ;QAC3C,IAAI,OAAO,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC,GAAE,GAAG,EAAE,EAAE,OAAO,KAAK,CAAC,IAAI;QAC1E,OAAO,CAAC,CAAC,EAAE,OAAO,KAAK,CAAC,GAAE,GAAG,EAAE,EAAE,OAAO,KAAK,CAAC,GAAE,GAAG,CAAC,EAAE,OAAO,KAAK,CAAC,IAAI;IACzE;IAEA,MAAM,eAAe,CAAC;QACpB,IAAI,CAAC,GAAG,OAAO;QACf,MAAM,SAAS,OAAO,GAAG,OAAO,CAAC,OAAO;QACxC,OAAO,OAAO,MAAM,KAAK;IAC3B;IAEA,MAAM,eAAe,CAAC;QACpB,IAAI,CAAC,GAAG,OAAO;QACf,MAAM,KAAK;QACX,OAAO,GAAG,IAAI,CAAC,OAAO;IACxB;IAEA,gFAAgF;IAChF,MAAM,cAAc,CAAC;QACnB,IAAI,IAAI,OAAO,SAAS,IAAI,IAAI,GAAG,WAAW;QAC9C,6BAA6B;QAC7B,IAAI,EAAE,OAAO,CAAC,QAAQ;QACtB,oCAAoC;QACpC,MAAM,KAAK,EAAE,OAAO,CAAC;QACrB,IAAI,OAAO,CAAC,GAAG;YACb,IAAI,EAAE,KAAK,CAAC,GAAG,KAAK,KAAK,EAAE,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC,MAAM;QACzD;QACA,qCAAqC;QACrC,OAAO,EAAE,KAAK,CAAC,GAAG;IACpB;IAEA,MAAM,qBAAqB,CAAC,kBAC1B,yPAAC;YAAe,UAAU;YAAG,WAAW,CAAC,IAAM,kBAAkB,GAAG;YAAI,SAAS;YAAC,aAAa,CAAC,IAAM,wBAAwB,GAAG,EAAE,EAAE;YAAG,YAAY,CAAC,IAAM,EAAE,cAAc;YAAI,QAAQ,CAAC,IAAM,qBAAqB,GAAG,EAAE,EAAE;YAAG,WAAU;;8BACrO,yPAAC;oBAAI,WAAU;;sCACb,yPAAC;4BAAI,WAAU;;;;;;sCAEf,yPAAC;4BAAI,WAAU;sCACb,cAAA,yPAAC;gCAAO,OAAO,EAAE,QAAQ;gCAAE,UAAU,CAAC,IAAM,uBAAuB,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,KAAK;gCAAqB,WAAU;;kDACpH,yPAAC;wCAAO,OAAM;kDAAS;;;;;;kDACvB,yPAAC;wCAAO,OAAM;kDAAM;;;;;;;;;;;;;;;;;sCAIxB,yPAAC;4BAAI,WAAU;sCACb,cAAA,yPAAC;gCAAM,WAAU;;kDACf,yPAAC;wCAAM,MAAK;wCAAW,SAAS,CAAC,CAAC,EAAE,QAAQ;wCAAE,UAAU,CAAC,IAAM,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;wDAAC,GAAG,IAAI;wDAAE,UAAU,EAAE,MAAM,CAAC,OAAO;oDAAC,IAAI;;;;;;kDACnK,yPAAC;kDAAK;;;;;;;;;;;;;;;;;;;;;;;8BAKZ,yPAAC;oBAAI,WAAU;8BACZ,sBAAsB,EAAE,EAAE,iBACzB,yPAAC;wBACC,KAAK,CAAC;4BAAS,gBAAgB,OAAO,GAAG;wBAAI;wBAC7C,SAAS;wBACT,OAAO,EAAE,KAAK;wBACd,UAAU,CAAC,IAAM,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;wCAAE,GAAG,IAAI;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC,IAAI;wBACjH,QAAQ,IAAM,qBAAqB;wBACnC,WAAU;;;;;6CAGZ,yPAAC;wBAAI,WAAU;wBAAsB,eAAe,IAAM,qBAAqB,EAAE,EAAE;kCAAI,EAAE,KAAK;;;;;;;;;;;8BAIlG,yPAAC;oBAAI,WAAU;;wBAA6B;wBAAO,EAAE,IAAI;;;;;;;gBAEvD;oBAAC;oBAAQ;oBAAW;iBAAW,CAAc,QAAQ,CAAC,EAAE,IAAI,mBAC5D,yPAAC;oBAAI,WAAU;;wBACZ,CAAC,EAAE,OAAO,IAAE,EAAE,EAAE,GAAG,CAAC,CAAC,KAAa,kBACjC,yPAAC;gCAAY,WAAU;;kDACrB,yPAAC;wCAAM,OAAO;wCAAK,UAAU,CAAC,IAAM,aAAa,EAAE,EAAE,EAAE,GAAG,EAAE,MAAM,CAAC,KAAK;wCAAG,WAAU;;;;;;kDACrF,yPAAC;wCAAO,SAAS,IAAM,WAAW,EAAE,EAAE,EAAE,GAAG,KAAK,GAAG,CAAC,GAAG,IAAE;wCAAK,WAAU;kDAAwC;;;;;;kDAChH,yPAAC;wCAAO,SAAS,IAAM,WAAW,EAAE,EAAE,EAAE,GAAG,KAAK,GAAG,CAAC,CAAC,EAAE,OAAO,IAAE,EAAE,EAAE,MAAM,GAAC,GAAG,IAAE;wCAAK,WAAU;kDAAwC;;;;;;kDACvI,yPAAC;wCAAO,SAAS,IAAM,aAAa,EAAE,EAAE,EAAE;wCAAI,WAAU;kDAAiC;;;;;;;+BAJjF;;;;;sCAOZ,yPAAC;4BAAI,WAAU;sCACb,cAAA,yPAAC;gCAAO,SAAS,IAAM,UAAU,EAAE,EAAE;gCAAG,WAAU;0CAA4C;;;;;;;;;;;;;;;;;8BAKpG,yPAAC;oBAAI,WAAU;;sCACb,yPAAC;4BAAO,SAAS,IAAM,qBAAqB,EAAE,EAAE;4BAAG,WAAU;sCAAwB;;;;;;sCACrF,yPAAC;4BAAO,SAAS,IAAM,yBAAyB,EAAE,EAAE,EAAE,EAAE,QAAQ;4BAAG,WAAU;sCAAwB;;;;;;sCACrG,yPAAC;4BAAO,SAAS,IAAM,2BAA2B,EAAE,EAAE,EAAE,EAAE,QAAQ;4BAAG,WAAU;sCAAwB;;;;;;sCACvG,yPAAC;4BAAO,SAAS,IAAM,eAAe,EAAE,EAAE;4BAAG,WAAU;sCAAuB;;;;;;;;;;;;;WAxDxE,EAAE,EAAE;;;;;IA6DhB,wDAAwD;IACxD,2NAAK,CAAC,SAAS,CAAC;QACd,IAAI,qBAAqB,gBAAgB,OAAO,EAAE;YAChD,IAAI;gBAAE,gBAAgB,OAAO,CAAC,KAAK;gBAAI,gBAAgB,OAAO,CAAC,MAAM;YAAI,EAAE,OAAO,GAAG,CAAC;QACxF;IACF,GAAG;QAAC;KAAkB;IAEtB,MAAM,2BAA2B,CAAC,GAAQ;QACxC,MAAM,eAAe,EAAE,QAAQ,iBAAG,yPAAC;YAAK,WAAU;sBAAoB;;;;;mBAAW;QACjF,OAAQ,EAAE,IAAI;YACZ,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAM,WAAU;4BAAiC,aAAY;;;;;;;mBAFtD,EAAE,EAAE;;;;;YAKlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAS,WAAU;4BAAiC,MAAM;4BAAG,aAAY;;;;;;;mBAFlE,EAAE,EAAE;;;;;YAKlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAI,WAAU;sCACZ,CAAC,EAAE,OAAO,IAAE,EAAE,EAAE,GAAG,CAAC,CAAC,KAAa,kBACjC,yPAAC;oCAAc,WAAU;;sDAAkC,yPAAC;4CAAM,MAAK;4CAAQ,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;;;;;;wCAAK;;mCAAzF;;;;;;;;;;;mBAJR,EAAE,EAAE;;;;;YASlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAI,WAAU;sCACZ,CAAC,EAAE,OAAO,IAAE,EAAE,EAAE,GAAG,CAAC,CAAC,KAAa,kBACjC,yPAAC;oCAAc,WAAU;;sDAAkC,yPAAC;4CAAM,MAAK;;;;;;wCAAc;;mCAAzE;;;;;;;;;;;mBAJR,EAAE,EAAE;;;;;YASlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAO,WAAU;;8CAChB,yPAAC;8CAAO;;;;;;gCACP,CAAC,EAAE,OAAO,IAAE,EAAE,EAAE,GAAG,CAAC,CAAC,KAAa,kBAAe,yPAAC;kDAAgB;uCAAJ;;;;;;;;;;;;mBAJzD,EAAE,EAAE;;;;;YAQlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAI,WAAU;sCACb,cAAA,yPAAC;gCACC,MAAK;gCACL,OAAO,EAAE,KAAK,GAAG,OAAO,EAAE,KAAK,EAAE,KAAK,CAAC,GAAE,MAAM;gCAC/C,UAAU,CAAC,IAAM,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;gDAAE,GAAG,IAAI;gDAAE,OAAO,EAAE,MAAM,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,MAAM,CAAC,KAAK,EAAE,WAAW,KAAK;4CAAK,IAAI;gCACjK,SAAS,CAAC;oCAAQ,MAAM,IAAI,EAAE,MAAM;oCAAsB,IAAI;wCAAG,EAAU,UAAU;oCAAM,EAAE,OAAM,CAAC;gCAAE;gCACtG,WAAU;;;;;;;;;;;;mBARN,EAAE,EAAE;;;;;YAalB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;;8CACC,yPAAC;oCACC,KAAK,CAAC;wCAAS,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;oCAAI;oCAC7C,MAAK;oCACL,WAAW,CAAC,+BAA+B,EAAE,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,KAAK,IAAI,mBAAmB,IAAI;oCACxG,aAAY;oCACZ,OAAO,EAAE,KAAK,IAAI;oCAClB,UAAU,CAAC;wCACT,MAAM,YAAY,YAAY,EAAE,MAAM,CAAC,KAAK;wCAC5C,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAU,IAAI;wCAC3F,qCAAqC;wCACrC,WAAW;4CACT,MAAM,KAAK,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC;4CAClC,IAAI,IAAI;gDACN,MAAM,MAAM,CAAC,aAAa,EAAE,EAAE,MAAM;gDACpC,IAAI;oDAAE,GAAG,iBAAiB,CAAC,KAAK;gDAAM,EAAE,OAAO,KAAK,CAAC;4CACvD;wCACF,GAAG;oCACL;;;;;;gCAED,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,KAAK,mBAC/B,yPAAC;oCAAI,WAAU;8CAA4B;;;;;;;;;;;;;mBAvBvC,EAAE,EAAE;;;;;YA4BlB,KAAK;gBACH,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;;8CACC,yPAAC;oCACC,KAAK,CAAC;wCAAS,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC,GAAG;oCAAI;oCAC7C,MAAK;oCACL,WAAW,CAAC,+BAA+B,EAAE,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,KAAK,IAAI,mBAAmB,IAAI;oCACxG,aAAY;oCACZ,OAAO,EAAE,KAAK,IAAI;oCAClB,UAAU,CAAC;wCACT,MAAM,YAAY,YAAY,EAAE,MAAM,CAAC,KAAK;wCAC5C,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;oDAAE,GAAG,IAAI;oDAAE,OAAO;gDAAU,IAAI;wCAC3F,WAAW;4CACT,MAAM,KAAK,UAAU,OAAO,CAAC,EAAE,EAAE,CAAC;4CAClC,IAAI,IAAI;gDACN,MAAM,MAAM,CAAC,aAAa,EAAE,EAAE,MAAM;gDACpC,IAAI;oDAAE,GAAG,iBAAiB,CAAC,KAAK;gDAAM,EAAE,OAAO,KAAK,CAAC;4CACvD;wCACF,GAAG;oCACL;;;;;;gCAED,EAAE,KAAK,IAAI,CAAC,aAAa,EAAE,KAAK,mBAC/B,yPAAC;oCAAI,WAAU;8CAA4B;;;;;;;;;;;;;mBAtBvC,EAAE,EAAE;;;;;YA2BlB;gBACE,qBACE,yPAAC;oBAAe,WAAU;;sCACxB,yPAAC;4BAAI,WAAU;;gCAAuB,OAAO,KAAK,QAAQ,CAAC,GAAE;gCAAK;gCAAG,EAAE,KAAK;gCAAE;;;;;;;sCAC9E,yPAAC;4BAAM,WAAU;4BAAiC,aAAY;;;;;;;mBAFtD,EAAE,EAAE;;;;;QAKpB;IACF;IAEA,MAAM,oBAAoB,CAAC,GAAwB;QACjD,IAAI,EAAE,GAAG,KAAK,UAAU;YACtB,mBAAmB,CAAC,IAAM,EAAE,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE;YAC3D;QACF;QACA,IAAI,EAAE,GAAG,KAAK,SAAS;YACrB,6DAA6D;YAC7D,MAAM,WAAW,OAAO,uBAAuB,EAAE,KAAK;YACtD,IAAI,YAAY,MAAM;gBACpB,mBAAmB,CAAC,IAAM,EAAE,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,EAAE,EAAE,GAAG;4BAAC,GAAG,IAAI;4BAAE,OAAO;wBAAS,IAAI;YAC3F;YACA;QACF;QACA,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,WAAW;YACnD,aAAa,EAAE,EAAE,EAAE;YACnB;QACF;QACA,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,KAAK,aAAa;YACrD,aAAa,EAAE,EAAE,EAAE;YACnB;QACF;IACF;IAEA,MAAM,gBAAgB;QACpB,MAAM,aAAa;YACjB,OAAO;YACP;YACA;YACA;YACA;YACA;YACA;QACF;QACA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,iBAAiB;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM;gBACN;YACF;YACA,IAAI,oBAAoB,gBAAgB,MAAM,GAAG,GAAG;gBAClD,MAAM,wBAAwB;YAChC;YACA,MAAM;QACR,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,MAAM;QACR;IACF;IAEA,qBACE,yPAAC;QAAI,WAAU;;0BACb,yPAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAC3C,yPAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAE1C,yPAAC;gBAAI,WAAU;;kCACb,yPAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO;wBACtB,WAAW,CAAC,+BAA+B,EAAE,QAAQ,YAAY,6CAA6C,iBAAiB;kCAChI;;;;;;kCAGD,yPAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO;wBACtB,WAAW,CAAC,+BAA+B,EAAE,QAAQ,cAAc,6CAA6C,iBAAiB;kCAClI;;;;;;;;;;;;YAKF,QAAQ,0BACP,yPAAC;gBAAI,WAAU;;kCAEb,yPAAC;;0CACC,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAE7C,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA8B;;;;;;0DAC/C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;0CAI7F,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;kDAE3F,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;0CAI7F,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAI,WAAU;0DACb,cAAA,yPAAC;oDAAM,MAAK;oDAAO,SAAS,CAAC;wDAAQ,MAAM,IAAI,EAAE,MAAM;wDAAsB,IAAI;4DAAG,EAAU,UAAU;wDAAM,EAAE,OAAM,CAAC;oDAAE;oDAAG,WAAU;;;;;;;;;;;;;;;;;kDAG1I,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAI,WAAU;0DACb,cAAA,yPAAC;oDAAM,MAAK;oDAAO,SAAS,CAAC;wDAAQ,MAAM,IAAI,EAAE,MAAM;wDAAsB,IAAI;4DAAG,EAAU,UAAU;wDAAM,EAAE,OAAM,CAAC;oDAAE;oDAAG,WAAU;;;;;;;;;;;;;;;;;kDAG1I,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAI,WAAU;0DACb,cAAA,yPAAC;oDAAM,MAAK;oDAAO,SAAS,CAAC;wDAAQ,MAAM,IAAI,EAAE,MAAM;wDAAsB,IAAI;4DAAG,EAAU,UAAU;wDAAM,EAAE,OAAM,CAAC;oDAAE;oDAAG,WAAU;;;;;;;;;;;;;;;;;;;;;;;0CAK5I,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAM,IAAG;wCAAa,MAAK;wCAAW,WAAU;;;;;;kDACjD,yPAAC;wCAAM,SAAQ;wCAAa,WAAU;kDAAe;;;;;;;;;;;;0CAGvD,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;kDAE3F,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;0CAI7F,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;;;;;;;0CAKd,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA8B;;;;;;0DAC/C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;0CAI7F,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA8B;;;;;;0DAC/C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;0CAI7F,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA8B;;;;;;0DAC/C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;;;;;;;kCAM/F,yPAAC;;0CACC,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;kDAE3F,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;;;;;;;;;;;;;kCAM/F,yPAAC;;0CACC,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,yPAAC,iKAAW;gDAAC,OAAO;gDAAa,UAAU;gDAAgB,aAAY;;;;;;;;;;;;kDAGzE,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,yPAAC,iKAAW;gDAAC,OAAO;gDAAc,UAAU;gDAAiB,aAAY;;;;;;;;;;;;kDAK3E,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAAiC;;;;;;0DAClD,yPAAC,iKAAW;gDAAC,OAAO;gDAAU,UAAU;gDAAa,aAAY;;;;;;;;;;;;;;;;;;;;;;;;kCAMvE,yPAAC;kCACC,cAAA,yPAAC;;8CACC,yPAAC;oCAAM,WAAU;8CAAiC;;;;;;8CAClD,yPAAC;oCACC,MAAM;oCACN,OAAO;oCACP,UAAU,CAAC,IAAM,yBAAyB,EAAE,MAAM,CAAC,KAAK;oCACxD,WAAU;oCACV,aAAY;;;;;;;;;;;;;;;;;kCAMlB,yPAAC;;0CACC,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;kDAGZ,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAM,WAAU;gDAA4D,aAAY;;;;;;;;;;;;kDAE3F,yPAAC;;0DACC,yPAAC;gDAAM,WAAU;0DAA4B;;;;;;0DAC7C,yPAAC;gDAAO,WAAU;0DAChB,cAAA,yPAAC;8DAAO;;;;;;;;;;;;;;;;;;;;;;;0CAKd,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAM,WAAU;;0DAA4B,yPAAC;gDAAM,MAAK;gDAAW,WAAU;;;;;;4CAAiB;;;;;;;kDAC/F,yPAAC;wCAAM,WAAU;;0DAA4B,yPAAC;gDAAM,MAAK;gDAAW,WAAU;;;;;;4CAAiB;;;;;;;kDAC/F,yPAAC;wCAAM,WAAU;;0DAA4B,yPAAC;gDAAM,MAAK;gDAAW,WAAU;;;;;;4CAAiB;;;;;;;kDAC/F,yPAAC;wCAAM,WAAU;;0DAA4B,yPAAC;gDAAM,MAAK;gDAAW,WAAU;;;;;;4CAAiB;;;;;;;kDAC/F,yPAAC;wCAAM,WAAU;;0DAA4B,yPAAC;gDAAM,MAAK;gDAAW,WAAU;;;;;;4CAAiB;;;;;;;;;;;;;0CAGjG,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAM,WAAU;kDAAiC;;;;;;kDAClD,yPAAC;wCACC,MAAM;wCACN,OAAO;wCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;wCAClD,WAAU;wCACV,aAAY;;;;;;;;;;;;;;;;;;kCAKlB,yPAAC;wBAAI,WAAU;kCACb,cAAA,yPAAC;4BAAO,SAAS;4BAAe,WAAU;sCAA4E;;;;;;;;;;;;;;;;qCAM1H,yPAAC;gBAAI,WAAU;;kCACb,yPAAC;wBAAI,WAAU;kCACb,cAAA,yPAAC;4BAAM,WAAU;;8CACf,yPAAC;oCAAM,MAAK;oCAAW,SAAS;oCAAkB,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,OAAO;oCAAG,WAAU;;;;;;8CACpH,yPAAC;oCAAK,WAAU;8CAAc;;;;;;8CAC9B,yPAAC;oCAAK,WAAU;8CAA6B;;;;;;;;;;;;;;;;;oBAKhD,CAAC,iCACA,yPAAC;wBAAI,WAAU;;0CACb,yPAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,yPAAC;gCAAO,MAAK;gCAAS,SAAS,IAAM,oBAAoB;gCAAO,WAAU;0CAAmD;;;;;;;;;;;+BAE7H;kCACJ,yPAAC;wBAAI,WAAU;;0CACb,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAI,OAAM;wCAAK,QAAO;wCAAK,SAAQ;wCAAY,MAAK;wCAAO,OAAM;wCAA6B,WAAU;;0DACvG,yPAAC;gDAAK,GAAE;gDAA6D,QAAO;gDAAe,aAAY;gDAAM,eAAc;gDAAQ,gBAAe;;;;;;0DAClJ,yPAAC;gDAAK,GAAE;gDAAY,QAAO;gDAAe,aAAY;gDAAM,eAAc;gDAAQ,gBAAe;;;;;;;;;;;;kDAEnG,yPAAC;;0DACC,yPAAC;gDAAE,WAAU;0DAAwB;;;;;;0DACrC,yPAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAGzC,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAM,KAAK;wCAAc,MAAK;wCAAO,WAAU;wCAAS,QAAO;wCAAuB,UAAU,OAAO;4CACtG,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;4CAChC,IAAI,CAAC,MAAM;4CACX,kDAAkD;4CAClD,IAAI,oBAAoB,gBAAgB,MAAM,GAAG,GAAG;gDAClD,MAAM,KAAK,QAAQ;gDACnB,IAAI,CAAC,IAAI;oDACP,EAAE,aAAa,CAAC,KAAK,GAAG;oDACxB;gDACF;4CACF;4CACA,oBAAoB,KAAK,IAAI;4CAC7B,2HAA2H;4CAC3H,MAAM,SAAS,KAAK,IAAI,CAAC,UAAU,CAAC,YAAY,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;4CACjF,IAAI,QAAQ;gDACV,IAAI;oDACF,MAAM,OAAO,MAAM,KAAK,IAAI;oDAC5B,MAAM,QAAQ,KAAK,KAAK,CAAC,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;oDAC5D,IAAI,MAAM,MAAM,GAAG,GAAG;wDACpB,MAAM,IAAI,MAAM,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,OAAS,CAAC;gEAAE,IAAI;gEAAS,MAAM;gEAAQ,OAAO;gEAAM,UAAU;gEAAiB,UAAU;4DAAK,CAAC;wDACjI,mBAAmB;wDACnB,WAAW;4DAAQ,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,qBAAqB,CAAC,CAAC,EAAE,CAAC,EAAE;wDAAG,GAAG;oDACrE,OAAO;wDACL,MAAM,SAAS;4DAAE,IAAI;4DAAS,MAAM;4DAAQ,OAAO,KAAK,IAAI;4DAAE,UAAU;4DAAiB,UAAU;wDAAK;wDACxG,mBAAmB;4DAAC;yDAAO;wDAC3B,WAAW,IAAM,qBAAqB,OAAO,EAAE,GAAG;oDACpD;gDACF,EAAE,OAAO,KAAK;oDACZ,MAAM,WAAW;wDAAE,IAAI;wDAAS,MAAM;wDAAQ,OAAO,CAAC,UAAU,EAAE,KAAK,IAAI,CAAC,0BAA0B,CAAC;wDAAE,UAAU;oDAAgB;oDACnI,mBAAmB;wDAAC;qDAAS;oDAC7B,WAAW,IAAM,qBAAqB,SAAS,EAAE,GAAG;gDACtD;4CACF,OAAO;gDACL,4FAA4F;gDAC5F,IAAI;oDACF,MAAM,WAAW,MAAM,KAAK,WAAW;oDACvC,mCAAmC;oDACnC,MAAM,QAAQ,IAAI,WAAW;oDAC7B,IAAI,SAAS;oDACb,MAAM,QAAQ;oDACd,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,KAAK,MAAO;wDAC5C,MAAM,QAAQ,MAAM,QAAQ,CAAC,GAAG,IAAI;wDACpC,UAAU,OAAO,YAAY,CAAC,KAAK,CAAC,MAAM,MAAM,IAAI,CAAC;oDACvD;oDACA,MAAM,MAAM,KAAK;oDAEjB,wDAAwD;oDACxD,IAAI,YAAgC;oDACpC,IAAI;wDACF,MAAM,KAAK,MAAM,MAAM,4BAA4B;4DACjD,QAAQ;4DACR,SAAS;gEAAE,gBAAgB;4DAAmB;4DAC9C,MAAM,KAAK,SAAS,CAAC;gEAAE,MAAM,KAAK,IAAI;gEAAE,MAAM,KAAK,IAAI;gEAAE,MAAM;4DAAI;wDACrE;wDACA,MAAM,SAAS,MAAM,GAAG,IAAI;wDAC5B,IAAI,UAAU,OAAO,EAAE,IAAI,OAAO,SAAS,EAAE,YAAY,OAAO,SAAS;oDAC3E,EAAE,OAAO,IAAI;oDACX,gEAAgE;oDAClE;oDAEA,qDAAqD;oDACrD,MAAM,MAAM,MAAM,MAAM,2BAA2B;wDACjD,QAAQ;wDACR,SAAS;4DAAE,gBAAgB;wDAAmB;wDAC9C,MAAM,KAAK,SAAS,CAAC;4DAAE,MAAM,KAAK,IAAI;4DAAE,MAAM,KAAK,IAAI;4DAAE,MAAM;4DAAK;wDAAU;oDAChF;oDACA,MAAM,OAAO,MAAM,IAAI,IAAI;oDAC3B,0CAA0C;oDAC1C,wFAAwF;oDAExF,gFAAgF;oDAChF,IAAI,SAAgB,EAAE;oDACtB,IAAI,QAAQ,KAAK,EAAE,IAAI,MAAM,OAAO,CAAC,KAAK,MAAM,KAAK,KAAK,MAAM,CAAC,MAAM,GAAG,GAAG;wDAC3E,SAAS,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,IAAW,CAAC;gEAAE,GAAG,CAAC;gEAAE,UAAU,EAAE,QAAQ,IAAI;4DAAgB,CAAC;oDACzF,OAAO;wDACL,MAAM,OAAO,AAAC,QAAQ,KAAK,EAAE,IAAI,KAAK,IAAI,GAAI,OAAO,KAAK,IAAI,IAAK,QAAQ,KAAK,IAAI,GAAG,OAAO,KAAK,IAAI,EAAE,OAAO,CAAC,YAAY,QAAQ;wDACrI,MAAM,SAAS,KAAK,KAAK,CAAC,UAAU,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC,SAAS,KAAK,CAAC,GAAG;wDAChF,MAAM,WAAW,CAAC,IAAc,EAAE,OAAO,CAAC,oBAAoB,IAAI,OAAO,CAAC,mBAAmB,IAAI,OAAO,CAAC,qBAAqB,IAAI,IAAI;wDACtI,KAAK,MAAM,OAAO,OAAQ;4DACxB,MAAM,QAAQ,IAAI,KAAK,CAAC,SAAS,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI,IAAI,MAAM,CAAC;4DAC3D,IAAI,MAAM,MAAM,KAAK,GAAG;4DACxB,IAAI,MAAM,MAAM,GAAG,GAAG;gEACpB,MAAM,OAAO,MAAM,KAAK,CAAC,GAAG,MAAM,CAAC,CAAA,IAAK,4CAA4C,IAAI,CAAC,MAAM,YAAY,IAAI,CAAC;gEAChH,IAAI,KAAK,MAAM,IAAI,GAAG;oEACpB,MAAM,UAAU,MAAM,KAAK,CAAC,GAAG,GAAG,CAAC,UAAU,MAAM,CAAC;oEACpD,OAAO,IAAI,CAAC;wEAAE,IAAI;wEAAS,MAAM;wEAAS,OAAO,KAAK,CAAC,EAAE;wEAAE;wEAAS,UAAU;wEAAiB,UAAU;oEAAK;oEAC9G;gEACF;4DACF;4DACA,OAAO,IAAI,CAAC;gEAAE,IAAI;gEAAS,MAAM;gEAAQ,OAAO,KAAK,CAAC,EAAE;gEAAE,UAAU;gEAAiB,UAAU;4DAAK;wDACtG;wDACA,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO,IAAI,CAAC;4DAAE,IAAI;4DAAS,MAAM;4DAAQ,OAAO,CAAC,UAAU,EAAE,KAAK,IAAI,CAAC,uBAAuB,CAAC;4DAAE,UAAU;4DAAiB,UAAU;wDAAK;oDACtK;oDAEA,mBAAmB;oDACnB,IAAI,OAAO,MAAM,GAAG,GAAG,WAAW,IAAM,qBAAqB,MAAM,CAAC,EAAE,CAAC,EAAE,GAAG;gDAC9E,EAAE,OAAO,KAAK;oDACZ,MAAM,YAAY;wDAAE,IAAI;wDAAS,MAAM;wDAAQ,OAAO,CAAC,UAAU,EAAE,KAAK,IAAI,CAAC,0BAA0B,CAAC;wDAAE,UAAU;oDAAgB;oDACpI,mBAAmB;wDAAC;qDAAU;oDAC9B,WAAW,IAAM,qBAAqB,UAAU,EAAE,GAAG;gDACvD;4CACF;wCACF;;;;;;kDACA,yPAAC;wCAAO,MAAK;wCAAS,SAAS,IAAM,aAAa,OAAO,EAAE;wCAAS,WAAU;;0DAC5E,yPAAC;gDAAI,OAAM;gDAAK,QAAO;gDAAK,SAAQ;gDAAY,MAAK;gDAAO,OAAM;gDAA6B,WAAU;;kEACvG,yPAAC;wDAAK,GAAE;wDAAW,QAAO;wDAAe,aAAY;wDAAM,eAAc;wDAAQ,gBAAe;;;;;;kEAChG,yPAAC;wDAAK,GAAE;wDAAkB,QAAO;wDAAe,aAAY;wDAAM,eAAc;wDAAQ,gBAAe;;;;;;;;;;;;4CACnG;;;;;;;oCAGP,kCACC,yPAAC;kDACE,CAAC,kCACA,yPAAC;4CAAO,MAAK;4CAAS,SAAS,IAAM,qBAAqB;4CAAO,WAAU;sDAAyH;;;;;iEAIpM,yPAAC;4CAAI,WAAU;;8DACb,yPAAC;oDAAK,WAAU;8DAA6B;;;;;;8DAC7C,yPAAC;oDAAO,MAAK;oDAAS,SAAS;wDAC7B,oBAAoB;wDACpB,mBAAmB,EAAE;wDACrB,IAAI,aAAa,OAAO,EAAE,aAAa,OAAO,CAAC,KAAK,GAAG;wDACvD,qBAAqB;oDACvB;oDAAG,WAAU;8DAAkD;;;;;;8DAC/D,yPAAC;oDAAO,MAAK;oDAAS,SAAS,IAAM,qBAAqB;oDAAQ,WAAU;8DAA4C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAQlI,yPAAC;wBAAI,WAAU;;0CACb,yPAAC;gCAAM,WAAU;0CAAwB;;;;;;0CACzC,yPAAC;gCAAO,OAAO;gCAAiB,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gCAAqB,WAAU;;kDAC/G,yPAAC;wCAAO,OAAM;kDAAS;;;;;;kDACvB,yPAAC;wCAAO,OAAM;kDAAM;;;;;;;;;;;;0CAEtB,yPAAC;gCAAI,WAAU;0CACX,cAAA,yPAAC;oCACD,MAAK;oCACL,SAAS,IAAM,sBAAsB,CAAC,IAAM,CAAC;oCAC7C,gBAAc;oCACV,WAAW,CAAC,yFAAyF,EAAE,qBAAqB,oEAAoE,mEAAmE;;sDAEvQ,yPAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAY,MAAK;4CAAO,OAAM;4CAA6B,WAAW,GAAG,qBAAqB,eAAe,iBAAiB;;8DAChK,yPAAC;oDAAK,GAAE;oDAA+C,QAAO;oDAAe,aAAY;oDAAO,eAAc;oDAAQ,gBAAe;;;;;;8DACrI,yPAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAI,QAAO;oDAAe,aAAY;;;;;;;;;;;;sDAElE,yPAAC;sDAAK;;;;;;;;;;;;;;;;;;;;;;;kCAKd,yPAAC;;0CACC,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,yPAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAE1C,yPAAC;gCAAI,WAAU;;kDACb,yPAAC;wCAAI,WAAU;kDACb,cAAA,yPAAC;4CAAI,WAAU;;8DACb,yPAAC;oDAAG,WAAU;8DAA2B;;;;;;8DACzC,yPAAC;oDAAI,WAAU;;sEACb,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,QAAQ;4DAAiB,MAAK;4DAAS,SAAS;gEAC9G,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAQ,OAAO;oEAAgB,UAAU;oEAAiB,UAAU;gEAAK;gEACxG,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,YAAY;4DAAgB,MAAK;4DAAS,SAAS;gEACjH,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAY,OAAO;oEAAe,UAAU;oEAAiB,UAAU;gEAAK;gEAC3G,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,YAAY;4DAAmB,MAAK;4DAAS,SAAS;gEACpH,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAY,OAAO;oEAAkB,SAAS;wEAAC;wEAAW;qEAAW;oEAAE,UAAU;oEAAiB,UAAU;gEAAK;gEAChJ,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,SAAS;4DAAe,MAAK;4DAAS,SAAS;gEAC7G,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAS,OAAO;oEAAc,SAAS;wEAAC;wEAAW;qEAAW;oEAAE,UAAU;oEAAiB,UAAU;gEAAK;gEACzI,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,YAAY;4DAAW,MAAK;4DAAS,SAAS;gEAC5G,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAY,OAAO;oEAAU,SAAS;wEAAC;wEAAM;qEAAM;oEAAE,UAAU;oEAAiB,UAAU;gEAAK;gEAC9H,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,QAAQ;4DAAgB,MAAK;4DAAS,SAAS;gEAC7G,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAQ,OAAO;oEAAe,UAAU;oEAAiB,UAAU;gEAAK;gEACvG,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,SAAS;4DAAU,MAAK;4DAAS,SAAS;gEACxG,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAS,OAAO;oEAAS,UAAU;oEAAiB,UAAU;gEAAK;gEAClG,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;sEAEzC,yPAAC;4DAAO,SAAS;4DAAC,aAAa,CAAC,IAAM,uBAAuB,GAAG,SAAS;4DAAU,MAAK;4DAAS,SAAS;gEACxG,MAAM,IAAI;oEAAE,IAAI;oEAAS,MAAM;oEAAS,OAAO;oEAAS,UAAU;oEAAiB,UAAU;gEAAK;gEAClG,YAAY;4DACd;4DAAG,WAAU;;8EACX,yPAAC;oEAAI,WAAU;8EAAsB;;;;;;8EACrC,yPAAC;oEAAI,WAAU;8EAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kDAM/C,yPAAC;wCAAI,WAAU;kDACb,cAAA,yPAAC;4CAAI,WAAU;;8DAEb,yPAAC;oDAAI,YAAY;oDAAiB,QAAQ,CAAC,IAAM,qBAAqB,GAAG;;sEACvE,yPAAC;4DAAI,WAAU;;8EACb,yPAAC;oEAAG,WAAU;8EAAsB;;;;;;8EACpC,yPAAC;oEAAI,WAAU;;wEAAyB,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,UAAU,MAAM;wEAAC;;;;;;;;;;;;;wDAErG,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,UAAU,MAAM,KAAK,kBAC/D,yPAAC;4DAAI,WAAU;sEAA2D;;;;;iFAE1E,yPAAC;4DAAI,WAAU;sEACV,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,UAAU,GAAG,CAAC;;;;;;;;;;;;8DAMlE,yPAAC;oDAAI,YAAY;oDAAiB,QAAQ,CAAC,IAAM,qBAAqB,GAAG;;sEACvE,yPAAC;4DAAI,WAAU;;8EACb,yPAAC;oEAAG,WAAU;8EAAsB;;;;;;8EACpC,yPAAC;oEAAI,WAAU;;wEAAyB,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,OAAO,MAAM;wEAAC;;;;;;;;;;;;;wDAElG,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,OAAO,MAAM,KAAK,kBAC5D,yPAAC;4DAAI,WAAU;sEAA2D;;;;;iFAE1E,yPAAC;4DAAI,WAAU;sEACZ,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,OAAO,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oBASpE,oCACC,yPAAC;wBAAI,WAAU;;0CACb,yPAAC;gCAAG,WAAU;0CAA+B;;;;;;0CACzC,yPAAC;gCAAI,WAAU;0CACZ,CAAC;oCACA,MAAM,WAAW,gBAAgB,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;oCAC9D,MAAM,QAAQ,gBAAgB,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;oCAC3D,qBACE;;4CACG,SAAS,MAAM,GAAG,mBACjB,yPAAC;gDAAI,WAAU;;kEACb,yPAAC;wDAAG,WAAU;kEAAkC;;;;;;kEAChD,yPAAC;wDAAI,WAAU;kEACZ,SAAS,GAAG,CAAC,CAAC,GAAG,IAAM,yBAAyB,GAAG,IAAE;;;;;;;;;;;;4CAK3D,MAAM,MAAM,GAAG,mBACd,yPAAC;;kEACC,yPAAC;wDAAG,WAAU;kEAAkC;;;;;;kEAChD,yPAAC;wDAAI,WAAU;kEACZ,MAAM,GAAG,CAAC,CAAC,GAAG,IAAM,yBAAyB,GAAG,IAAE;;;;;;;;;;;;4CAKxD,SAAS,MAAM,KAAK,KAAK,MAAM,MAAM,KAAK,mBACzC,yPAAC;gDAAI,WAAU;0DAAoC;;;;;;;;gCAI3D,CAAC;;;;;;;;;;;;kCAOX,yPAAC;wBAAI,WAAU;kCACb,cAAA,yPAAC;4BAAI,WAAU;sCACb,cAAA,yPAAC;gCAAO,SAAS;gCAAe,WAAU;0CAA4E;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASpI;AAEA,eAAe,wBAAwB,SAAgB;IACrD,8DAA8D;IAC9D,MAAM,MAAM,MAAM,MAAM,6BAA6B;QACnD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,OAAO;YAAM;QAAU;IAChD;IACA,OAAO,IAAI,IAAI;AACjB"}}]
}